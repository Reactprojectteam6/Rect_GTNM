{"ast":null,"code":"import _defineProperty from \"D:\\\\github\\\\Rect_GTNM\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nconst GET_PRODUCTS_ONSHOP = 'GET_PRODUCTS_ONSHOP';\nconst GET_SHOP_ID = 'GET_SHOP_ID';\nconst GET_SHOP = 'GET_SHOP';\nconst UPDATE_SHOP = 'UPDATE_SHOP';\nconst DELETE_PRODUCT = 'DELETE_PRODUCT';\nconst GET_ORDERS_SHOP = 'GET_ORDERS_SHOP'; //lay products tra ve form\n\nexport function getProductsShop(shop_id) {\n  return dispath => {\n    CallApi(shop_id, data => {\n      dispath(setProductsShop(data));\n    });\n  };\n} //action products shop\n\nfunction setProductsShop(products) {\n  return {\n    type: GET_PRODUCTS_ONSHOP,\n    products\n  };\n} //lay product trong shop tren api\n\n\nfunction CallApi(shop_id, callback) {\n  axios({\n    method: 'get',\n    url: \"https://127.0.0.1:5001/api/Product/Shop/\".concat(shop_id),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n    }\n  }).then(response => {\n    if (response.data != null) {\n      console.log(response.data);\n      callback(response.data);\n    } else callback(new \"can't get data\"());\n  });\n} //lay shop_id biet user_id\n\n\nexport function getShopID() {\n  return dispath => {\n    callShopIDApi(data => {\n      dispath(setShopID(data));\n    });\n  };\n}\n\nfunction setShopID(shop_id) {\n  return {\n    type: GET_SHOP_ID,\n    shop_id\n  };\n}\n\nfunction callShopIDApi(callback) {\n  //var token='Bearer '+localStorage.getItem(\"token\");\n  var user = JSON.parse(localStorage.getItem('currentUser')); //    console.log(user.id);\n\n  if (user != null) {\n    var token = 'Bearer ' + localStorage.getItem(\"token\");\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/User/\".concat(user.id, \"/shop\"),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      if (response.data != null) callback(response.data);else callback(null);\n    }).catch(err => console.log(err));\n  } else alert(\"Vui lòng đăng nhập!! please!!!\");\n} //lay shop tu shop_id\n\n\nexport function getShop(shop_id) {\n  return dispath => {\n    callShopApi(shop_id, data => {\n      dispath(setShop(data));\n    });\n  };\n}\n\nfunction setShop(shop) {\n  return {\n    type: GET_SHOP,\n    shop\n  };\n}\n\nfunction callShopApi(shop_id, callback) {\n  var user = JSON.parse(localStorage.getItem('currentUser'));\n\n  if (user != null) {\n    var token = 'Bearer ' + localStorage.getItem(\"token\");\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/User/shop/\".concat(shop_id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      if (response.data != null) callback(response.data);else callback(new \"can't get data\"());\n    }).catch(err => console.log(err));\n  } else alert(\"Vui lòng đăng nhập!! please!!!\");\n} //UPDATE SHOP\n\n\nexport function UpdateShop(shop_id, name, address) {\n  return dispath => {\n    callUpdateShop(shop_id, name, address, data => {\n      dispath(setUpdateShop(data));\n    });\n  };\n}\n\nfunction setUpdateShop(shop) {\n  return {\n    type: UPDATE_SHOP,\n    shop\n  };\n}\n\nexport function callUpdateShop(shop_id, name, address, callback) {\n  var oldShop = JSON.parse(localStorage.getItem('Shop'));\n  var newShop = {\n    name: name,\n    address: address\n  };\n  console.log(newShop);\n  axios({\n    method: 'put',\n    url: \"https://127.0.0.1:5001/api/User/shop/\".concat(shop_id),\n    data: newShop,\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n    }\n  }).then(response => {\n    if (response.data != null) {\n      axios({\n        method: 'get',\n        url: \"https://127.0.0.1:5001/api/User/shop/\".concat(shop_id),\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n        }\n      }).then(response1 => {\n        if (response1.data != null) {\n          localStorage.setItem('Shop', JSON.stringify(response1.data));\n          alert(\"Update completed!!!!\");\n        }\n      });\n      return callback(response.data);\n    } else {\n      alert(\"Can't update!! Try again later!!\");\n      return callback(null);\n    }\n  });\n} //delete product of shop\n\nexport function deleteProduct(id) {\n  console.log(\"id la:\");\n  console.log(id);\n  return dispatch => {\n    axios({\n      method: 'delete',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") {\n        axios({\n          method: 'get',\n          url: \"https://127.0.0.1:5001/api/Product/Shop/\".concat(localStorage.getItem('shop_id')),\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem(\"token\")\n          }\n        }).then(response => {\n          if (response.data != null) {\n            dispatch({\n              type: DELETE_PRODUCT,\n              payload: response.data\n            });\n          }\n        });\n      }\n\n      if (res.status == \"400\") dispatch({\n        type: DELETE_PRODUCT,\n        payload: JSON.parse(localStorage.getItem('productShop'))\n      });\n    }); //dispatch({type:GET_PRODUCT_DETAIL,Product:product});//tra ve cho form\n  };\n} //ACTION CREATER GET ORDERS\n\nexport function getOrdersShop(shop_id) {\n  return dispath => {\n    callOrdersShop(shop_id, data => {\n      dispath(setOrdersShop(data));\n    });\n  };\n}\n\nfunction setOrdersShop(orders) {\n  return {\n    type: GET_ORDERS_SHOP,\n    orders\n  };\n}\n\nexport function callOrdersShop(shop_id, callback) {\n  axios({\n    method: 'get',\n    url: \"https://127.0.0.1:5001/api/Product/Shop/\".concat(shop_id)\n  }).then(response => {\n    if (response.data != null) callback(response.data);else callback(null);\n  });\n} //initialState\n\nvar data = localStorage.getItem('shop_id');\nvar data2 = JSON.parse(localStorage.getItem('productShop'));\nvar data3 = JSON.parse(localStorage.getItem('Shop'));\nvar data4 = JSON.parse(localStorage.getItem('Orders'));\nvar shop_state = {\n  shop_id: data ? data : null,\n  shop: data3 ? data3 : null,\n  products: data2 ? data2 : [],\n  orders: data4 ? data4 : []\n}; //REDUCER\n\nexport default function shop_reducer(state = shop_state, action) {\n  if (action.type === 'GET_PRODUCTS_ONSHOP') {\n    let newState = _objectSpread({}, state);\n\n    newState.products = action.products;\n    localStorage.setItem(\"productShop\", JSON.stringify(newState.products));\n    return newState;\n  }\n\n  if (action.type === 'GET_SHOP_ID') {\n    let newState = _objectSpread({}, state);\n\n    newState.shop_id = action.shop_id;\n    localStorage.setItem(\"shop_id\", newState.shop_id);\n    return newState;\n  }\n\n  if (action.type === 'GET_SHOP') {\n    let newState = _objectSpread({}, state);\n\n    newState.shop = action.shop;\n    localStorage.setItem(\"Shop\", JSON.stringify(newState.shop));\n    return newState;\n  }\n\n  if (action.type == 'UPDATE_SHOP') {\n    let newState = _objectSpread({}, state);\n\n    newState.shop = action.setShop;\n    localStorage.setItem(\"Shop\", JSON.stringify(newState.shop));\n    return newState;\n  }\n\n  if (action.type == 'DELETE_PRODUCT') {\n    let newState = _objectSpread({}, state);\n\n    newState.products = action.payload;\n    if (newState.products.length > 0) alert(\"xoa thanh cong\");\n    localStorage.setItem(\"productShop\", JSON.stringify(newState.products));\n    return newState;\n  }\n\n  if (action.type == 'GET_ORDERS_SHOP') {\n    let newState = _objectSpread({}, state);\n\n    newState.orders = action.orders;\n    localStorage.setItem(\"Orders\", JSON.stringify(newState.orders));\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["D:/github/Rect_GTNM/src/redux/shop_reducer.js"],"names":["axios","GET_PRODUCTS_ONSHOP","GET_SHOP_ID","GET_SHOP","UPDATE_SHOP","DELETE_PRODUCT","GET_ORDERS_SHOP","getProductsShop","shop_id","dispath","CallApi","data","setProductsShop","products","type","callback","method","url","headers","Accept","localStorage","getItem","then","response","console","log","getShopID","callShopIDApi","setShopID","user","JSON","parse","token","id","catch","err","alert","getShop","callShopApi","setShop","shop","UpdateShop","name","address","callUpdateShop","setUpdateShop","oldShop","newShop","response1","setItem","stringify","deleteProduct","dispatch","res","status","payload","getOrdersShop","callOrdersShop","setOrdersShop","orders","data2","data3","data4","shop_state","shop_reducer","state","action","newState","length"],"mappings":"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","sourcesContent":["import  axios  from \"axios\";\r\n\r\nconst GET_PRODUCTS_ONSHOP = 'GET_PRODUCTS_ONSHOP';\r\nconst GET_SHOP_ID = 'GET_SHOP_ID';\r\nconst GET_SHOP = 'GET_SHOP';\r\nconst UPDATE_SHOP = 'UPDATE_SHOP';\r\nconst DELETE_PRODUCT ='DELETE_PRODUCT';\r\nconst GET_ORDERS_SHOP = 'GET_ORDERS_SHOP';\r\n//lay products tra ve form\r\nexport function getProductsShop(shop_id)\r\n{\r\n    return dispath => {\r\n        CallApi(shop_id,data=>{\r\n            dispath(setProductsShop(data))\r\n        })\r\n    }\r\n}\r\n\r\n//action products shop\r\nfunction setProductsShop(products)\r\n{\r\n    return{\r\n        type : GET_PRODUCTS_ONSHOP,\r\n        products\r\n    }\r\n}\r\n\r\n\r\n//lay product trong shop tren api\r\nfunction CallApi(shop_id,callback)\r\n{\r\n    axios({\r\n        method: 'get',\r\n        url : `https://127.0.0.1:5001/api/Product/Shop/${shop_id}`,\r\n        headers:{\r\n            'Content-Type': 'application/json',\r\n            Accept: 'application/json',\r\n            'Authorization':'Bearer '+localStorage.getItem(\"token\")\r\n          }\r\n    }).then(response=>{\r\n        if(response.data != null)\r\n        {\r\n            console.log(response.data);\r\n            callback(response.data);\r\n        }\r\n        else callback(new(\"can't get data\"));\r\n    })\r\n}\r\n\r\n//lay shop_id biet user_id\r\nexport function getShopID()\r\n{\r\n    return dispath =>{\r\n        callShopIDApi(data =>{\r\n            dispath(setShopID(data))\r\n        });\r\n    }\r\n}\r\n\r\nfunction setShopID(shop_id){\r\n    return {\r\n        type : GET_SHOP_ID,\r\n        shop_id\r\n    }\r\n}\r\n\r\nfunction callShopIDApi(callback)\r\n{\r\n    //var token='Bearer '+localStorage.getItem(\"token\");\r\n    var user = JSON.parse(localStorage.getItem('currentUser'));\r\n//    console.log(user.id);\r\n    if(user != null)\r\n    {\r\n        var token='Bearer '+localStorage.getItem(\"token\");\r\n        axios({\r\n            method: 'get',\r\n            url: `https://127.0.0.1:5001/api/User/${user.id}/shop`,\r\n            headers:{\r\n                'Content-Type': 'application/json',\r\n                Accept: 'application/json',\r\n                'Authorization':'Bearer '+localStorage.getItem(\"token\")\r\n              }\r\n        }).then(response =>{\r\n            if(response.data!=null) callback(response.data);\r\n            else callback(null);\r\n        }).catch(err => console.log(err));\r\n    }\r\n    else alert(\"Vui lòng đăng nhập!! please!!!\")\r\n}\r\n\r\n//lay shop tu shop_id\r\nexport function getShop(shop_id)\r\n{\r\n    return dispath =>{\r\n        callShopApi(shop_id,data =>{\r\n            dispath(setShop(data))\r\n        });\r\n    }\r\n}\r\n\r\nfunction setShop(shop){\r\n    return {\r\n        type : GET_SHOP,\r\n        shop\r\n    }\r\n}\r\n\r\nfunction callShopApi(shop_id,callback)\r\n{\r\n    var user = JSON.parse(localStorage.getItem('currentUser'));\r\n    if(user != null)\r\n    {\r\n        var token='Bearer '+localStorage.getItem(\"token\");\r\n        axios({\r\n            method: 'get',\r\n            url: `https://127.0.0.1:5001/api/User/shop/${shop_id}`,\r\n            headers:{\r\n                'Content-Type': 'application/json',\r\n                Accept: 'application/json',\r\n                'Authorization':'Bearer '+localStorage.getItem(\"token\")\r\n              }\r\n        }).then(response =>{\r\n            if(response.data!=null) callback(response.data);\r\n            else callback(new(\"can't get data\"));\r\n        }).catch(err => console.log(err));\r\n    }\r\n    else alert(\"Vui lòng đăng nhập!! please!!!\")\r\n}\r\n\r\n//UPDATE SHOP\r\nexport function UpdateShop(shop_id,name,address)\r\n{\r\n    return dispath =>{\r\n        callUpdateShop(shop_id,name,address,data=>{\r\n            dispath(setUpdateShop(data))\r\n        })\r\n    }\r\n}\r\n\r\nfunction setUpdateShop(shop)\r\n{\r\n    return{\r\n        type: UPDATE_SHOP,\r\n        shop\r\n    }\r\n}\r\nexport function callUpdateShop(shop_id,name,address,callback)\r\n{\r\n    var oldShop = JSON.parse(localStorage.getItem('Shop'));\r\n    var newShop = {\r\n        name: name,\r\n        address: address\r\n    };\r\n    console.log(newShop);\r\n    axios({\r\n        method: 'put',\r\n        url: `https://127.0.0.1:5001/api/User/shop/${shop_id}`,\r\n        data: newShop,\r\n        headers:{\r\n            'Content-Type': 'application/json',\r\n            Accept: 'application/json',\r\n            'Authorization':'Bearer '+localStorage.getItem(\"token\")\r\n          }\r\n    }).then(response=>{\r\n        if(response.data!=null)\r\n        {\r\n            axios({\r\n                method: 'get',\r\n                url : `https://127.0.0.1:5001/api/User/shop/${shop_id}`,\r\n                headers:{\r\n                    'Content-Type': 'application/json',\r\n                    Accept: 'application/json',\r\n                    'Authorization':'Bearer '+localStorage.getItem(\"token\")\r\n                  }\r\n            }).then(response1=>{\r\n                if(response1.data != null)\r\n                {                    \r\n                    localStorage.setItem('Shop',JSON.stringify(response1.data));\r\n                    alert(\"Update completed!!!!\")      \r\n                }\r\n            })\r\n            return callback(response.data);\r\n        }\r\n        else\r\n        {\r\n            alert(\"Can't update!! Try again later!!\")\r\n            return callback(null);\r\n        }\r\n    })\r\n}\r\n//delete product of shop\r\nexport function deleteProduct(id)\r\n{   console.log(\"id la:\");\r\nconsole.log(id);\r\n  return dispatch => {\r\n    axios({\r\n      method:'delete',\r\n      url: `https://127.0.0.1:5001/api/Product/${id}`,\r\n          \r\n     headers:{\r\n    'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n    'Authorization':'Bearer '+localStorage.getItem('token')\r\n          }\r\n    }).then(res=>{\r\n     if(res.status==\"200\") \r\n     {  axios({\r\n        method: 'get',\r\n        url : `https://127.0.0.1:5001/api/Product/Shop/${localStorage.getItem('shop_id')}`,\r\n        headers:{\r\n            'Content-Type': 'application/json',\r\n            Accept: 'application/json',\r\n            'Authorization':'Bearer '+localStorage.getItem(\"token\")\r\n          }\r\n    }).then(response=>{\r\n        if(response.data != null)\r\n        {\r\n            dispatch({type:DELETE_PRODUCT,payload:response.data})\r\n        }\r\n        \r\n    })\r\n\r\n    }\r\n  \r\n     if(res.status==\"400\") dispatch({type:DELETE_PRODUCT,payload:JSON.parse(localStorage.getItem('productShop'))})\r\n    })\r\n   \r\n    //dispatch({type:GET_PRODUCT_DETAIL,Product:product});//tra ve cho form\r\n\r\n\r\n}\r\n}\r\n\r\n//ACTION CREATER GET ORDERS\r\nexport function getOrdersShop(shop_id)\r\n{\r\n    return dispath=>{\r\n        callOrdersShop(shop_id,data =>{\r\n            dispath(setOrdersShop(data))\r\n        })\r\n    }\r\n}\r\n\r\nfunction setOrdersShop(orders)\r\n{\r\n    return {\r\n        type: GET_ORDERS_SHOP,\r\n        orders\r\n    }\r\n}\r\n\r\nexport function callOrdersShop(shop_id,callback)\r\n{\r\n    axios({\r\n        method: 'get',\r\n        url: `https://127.0.0.1:5001/api/Product/Shop/${shop_id}`\r\n    }).then(response => {\r\n        if(response.data != null) callback(response.data);\r\n        else callback(null)\r\n    }\r\n    );\r\n}\r\n\r\n\r\n//initialState\r\nvar data =localStorage.getItem('shop_id');\r\nvar data2 = JSON.parse(localStorage.getItem('productShop'));\r\nvar data3 = JSON.parse(localStorage.getItem('Shop'))\r\nvar data4 = JSON.parse(localStorage.getItem('Orders'));\r\nvar shop_state = {\r\n    shop_id : data?data:null,\r\n    shop: data3?data3:null,\r\n    products : data2?data2:[],\r\n    orders: data4?data4:[]\r\n}\r\n\r\n\r\n//REDUCER\r\nexport default function shop_reducer(state = shop_state, action)\r\n{\r\n    if(action.type === 'GET_PRODUCTS_ONSHOP'){\r\n        let newState = {...state};\r\n        newState.products = action.products;\r\n        localStorage.setItem(\"productShop\",JSON.stringify(newState.products));\r\n        return newState;\r\n    }\r\n     if(action.type === 'GET_SHOP_ID')\r\n    {\r\n        let newState = {...state};\r\n        newState.shop_id = action.shop_id;\r\n        localStorage.setItem(\"shop_id\",newState.shop_id);\r\n        return newState;\r\n    }\r\n     if(action.type === 'GET_SHOP')\r\n    {\r\n        let newState = {...state};\r\n        newState.shop = action.shop;\r\n        localStorage.setItem(\"Shop\",JSON.stringify(newState.shop));\r\n        return newState;\r\n    }\r\n     if(action.type == 'UPDATE_SHOP')\r\n    {\r\n        let newState = {...state}\r\n        newState.shop = action.setShop;\r\n        localStorage.setItem(\"Shop\",JSON.stringify(newState.shop));\r\n        return newState;\r\n    }\r\n    if(action.type=='DELETE_PRODUCT')\r\n    {\r\n        let newState = {...state}\r\n        newState.products= action.payload;\r\n        if(newState.products.length>0) alert(\"xoa thanh cong\");\r\n        localStorage.setItem(\"productShop\",JSON.stringify(newState.products));\r\n        return newState;\r\n    }\r\n    if(action.type=='GET_ORDERS_SHOP')\r\n    {\r\n        let newState = {...state};\r\n        newState.orders = action.orders;\r\n        localStorage.setItem(\"Orders\",JSON.stringify(newState.orders));\r\n        return newState;\r\n    }\r\n    else return state;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}