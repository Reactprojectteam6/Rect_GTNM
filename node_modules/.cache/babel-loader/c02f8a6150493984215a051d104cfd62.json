{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\src\\\\Component\\\\Shop\\\\AddProduct.js\";\nimport React from 'react';\nimport Dashboard from './Dashboard';\nimport { connect } from 'react-redux';\nimport { getSubCategory } from '../../redux/home_reducer.js';\nimport { GetColors, addProduct } from '../../redux/shop_reducer.js';\nimport axios from 'axios';\n\nclass AddProduct extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      image: \"\",\n      product_name: \"\",\n      description: \"\",\n      cat_id: \"\",\n      price: \"\",\n      quantity: \"\",\n      color_id: \"\",\n      file: null,\n      imagePreviewUrl: null\n    };\n    this.onChange = this.onChange.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  async onSubmit(e) {\n    e.preventDefault();\n    let res = await this.uploadFile(this.state.file);\n    this.setState({\n      image: this.state.file.name\n    });\n  }\n\n  onChange(e) {\n    this.setState({\n      file: e.target.files[0]\n    });\n    let reader = new FileReader();\n\n    reader.onloadend = () => {\n      this.setState({\n        imagePreviewUrl: reader.result\n      });\n    };\n\n    reader.readAsDataURL(e.target.files[0]);\n  }\n\n  async uploadFile(file) {\n    const formData = new FormData();\n    formData.append('file', file);\n    return await axios.post('https://127.0.0.1:5001/api/Image', formData, {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    }).then(res => {\n      if (res.status == \"200\") console.log(res.data);\n      alert(\"upload thanh cong\");\n    });\n  }\n\n  componentWillMount() {\n    this.props.getSubCategory();\n    this.props.GetColors();\n  }\n\n  render() {\n    let _this$state = this.state,\n        product_name = _this$state.product_name,\n        description = _this$state.description,\n        cat_id = _this$state.cat_id,\n        price = _this$state.price,\n        quantity = _this$state.quantity,\n        color_id = _this$state.color_id,\n        image = _this$state.image;\n    let _this$props = this.props,\n        subcategory = _this$props.subcategory,\n        colors = _this$props.colors,\n        shop_id = _this$props.shop_id;\n    let $imagePreview = React.createElement(\"div\", {\n      className: \"previewText image-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Please select an Image for Preview\");\n\n    if (this.state.imagePreviewUrl) {\n      $imagePreview = React.createElement(\"div\", {\n        className: \"image-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: this.state.imagePreviewUrl,\n        alt: \"icon\",\n        width: \"200\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), \" \");\n    }\n\n    console.log(colors);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-xs-3 col-sm-3 col-md-3 col-lg-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Dashboard, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      class: \"col-xs-9 col-sm-9 col-md-9 col-lg-9\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      style: {\n        marginTop: \"15px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Th\\xEAm s\\u1EA3n ph\\u1EA9m m\\u1EDBi\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"col-xs-8 col-sm-8 col-md-8 col-lg-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"T\\xEAn s\\u1EA3n ph\\u1EA9m\"), React.createElement(\"input\", {\n      type: \"text\",\n      class: \"form-control\",\n      value: this.state.product_name,\n      onChange: e => {\n        this.setState({\n          product_name: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"Danh m\\u1EE5c\"), React.createElement(\"select\", {\n      class: \"form-control\",\n      required: \"requried\",\n      onChange: e => {\n        this.setState({\n          cat_id: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, subcategory.length > 0 && subcategory.map(item => {\n      return React.createElement(\"option\", {\n        value: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, item.name);\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.state.cat_id), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"M\\xF4 t\\u1EA3\"), React.createElement(\"textarea\", {\n      className: \"form-control\",\n      value: this.state.description,\n      onChange: e => {\n        this.setState({\n          description: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Gi\\xE1\"), React.createElement(\"input\", {\n      type: \"text\",\n      class: \"form-control\",\n      value: this.state.price,\n      onChange: e => {\n        this.setState({\n          price: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"S\\u1ED1 l\\u01B0\\u1EE3ng\"), React.createElement(\"input\", {\n      type: \"text\",\n      class: \"form-control\",\n      value: this.state.quantity,\n      onChange: e => {\n        this.setState({\n          quantity: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"M\\xE0u s\\u1EAFc\"), React.createElement(\"select\", {\n      class: \"form-control\",\n      required: \"required\",\n      onChange: e => {\n        this.setState({\n          color_id: e.target.value\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, colors.length > 0 && colors.map(item => {\n      return React.createElement(\"option\", {\n        value: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, item.name);\n    }))), React.createElement(\"div\", {\n      class: \"col-xs-4 col-sm-4 col-md-4 col-lg-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"\\u1EA2nh s\\u1EA3n ph\\u1EA9m\"), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Upload File\"), $imagePreview))), React.createElement(\"div\", {\n      class: \"row\",\n      style: {\n        marginTop: \"30px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-warning\",\n      style: {\n        width: \"130px\",\n        height: \"34px\",\n        marginLeft: \"200px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"H\\u1EE7y\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-default\",\n      style: {\n        width: \"130px\",\n        height: \"34px\",\n        marginLeft: \"50px\"\n      },\n      onClick: e => {\n        this.props.addProduct(product_name, description, cat_id, price, quantity, shop_id, false, color_id, image);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Th\\xEAm v\\xE0 \\u1EA9n\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-success\",\n      style: {\n        width: \"130px\",\n        height: \"34px\",\n        marginLeft: \"50px\"\n      },\n      onClick: e => {\n        this.props.addProduct(product_name, description, cat_id, price, quantity, shop_id, true, color_id, image);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Th\\xEAm v\\xE0 hi\\u1EC3n th\\u1ECB\"))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    shop_id: state.shopState.shop_id,\n    subcategory: state.homeState.subcategories,\n    colors: state.shopState.colors\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    getSubCategory: () => dispatch(getSubCategory()),\n    GetColors: () => dispatch(GetColors()),\n    addProduct: (product_name, description, cat_id, price, quantity, shop_id, permission, color_id, image) => dispatch(addProduct(product_name, description, cat_id, price, quantity, shop_id, permission, color_id, image))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddProduct);","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/Component/Shop/AddProduct.js"],"names":["React","Dashboard","connect","getSubCategory","GetColors","addProduct","axios","AddProduct","Component","constructor","props","state","image","product_name","description","cat_id","price","quantity","color_id","file","imagePreviewUrl","onChange","bind","onSubmit","e","preventDefault","res","uploadFile","setState","name","target","files","reader","FileReader","onloadend","result","readAsDataURL","formData","FormData","append","post","headers","then","status","console","log","data","alert","componentWillMount","render","subcategory","colors","shop_id","$imagePreview","marginTop","value","length","map","item","id","width","height","marginLeft","mapStateToProps","shopState","homeState","subcategories","mapDispatchToProps","dispatch","permission"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Dashboard from './Dashboard';\nimport { connect } from 'react-redux';\nimport {getSubCategory} from '../../redux/home_reducer.js';\nimport {GetColors,addProduct} from '../../redux/shop_reducer.js';\nimport axios from 'axios';\nclass AddProduct extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n        this.state = {\n            image:\"\",\n            product_name:\"\",\n            description: \"\",\n            cat_id: \"\",\n            price: \"\",\n            quantity: \"\",\n            color_id: \"\",\n            file:null,\n            imagePreviewUrl: null,\n        }\n        this.onChange=this.onChange.bind(this);\n        this.onSubmit=this.onSubmit.bind(this);\n    }\n    async onSubmit(e){\n        e.preventDefault() \n        let res = await this.uploadFile(this.state.file);\n        this.setState({image:this.state.file.name});\n    }\n    onChange(e) {\n        this.setState({file:e.target.files[0]});\n        let reader = new FileReader();\n     \n        reader.onloadend = () => {\n          this.setState({\n            imagePreviewUrl: reader.result\n          });\n        }\n     \n        reader.readAsDataURL(e.target.files[0])\n    }\n    async uploadFile(file){\n\n\n        const formData = new FormData();\n\n        formData.append('file',file)\n      \n        return  await axios.post('https://127.0.0.1:5001/api/Image', formData,{\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }).then(res=>{if(res.status==\"200\") console.log(res.data); alert(\"upload thanh cong\")});\n      }\n    componentWillMount(){\n        this.props.getSubCategory();\n        this.props.GetColors();\n    }\n    render()\n    {\n        let {product_name,description,cat_id,price,quantity,color_id,image}=this.state\n        let {subcategory,colors,shop_id} = this.props\n        let $imagePreview = (<div className=\"previewText image-container\">Please select an Image for Preview</div>);\n        if (this.state.imagePreviewUrl) {\n          $imagePreview = (<div className=\"image-container\" ><img src={this.state.imagePreviewUrl} alt=\"icon\" width=\"200\" /> </div>);\n        }\n        console.log(colors);\n        return(\n            <div>\n                <div class=\"col-xs-3 col-sm-3 col-md-3 col-lg-3\">\n                    <Dashboard/>\n                </div>\n                \n                \n                <div class=\"col-xs-9 col-sm-9 col-md-9 col-lg-9\">\n                    <h3 style={{marginTop:\"15px\"}}>Thêm sản phẩm mới</h3>\n                    <hr/>\n                    \n                    <div class=\"row\">\n                        <div class=\"col-xs-8 col-sm-8 col-md-8 col-lg-8\">\n                            <p>Tên sản phẩm</p>                    \n                            <input type=\"text\" class=\"form-control\" value={this.state.product_name} onChange={e=>{this.setState({product_name: e.target.value})}} />\n                            <p>Danh mục</p>                  \n                            <select class=\"form-control\" required=\"requried\" onChange={e=>{this.setState({cat_id: e.target.value})}}>\n                                {\n                                    subcategory.length>0 &&\n                                    subcategory.map(item=>{\n                                        return(\n                                            <option value={item.id}>{item.name}</option>\n                                        )\n                                    })\n                                }\n                            </select>\n                            <p>{this.state.cat_id}</p>\n                            \n                            <p>Mô tả</p>\n                            <textarea className=\"form-control\" value={this.state.description} onChange={e=>{this.setState({description: e.target.value})}}></textarea>\n\n                            <p>Giá</p>                    \n                            <input type=\"text\" class=\"form-control\" value={this.state.price} onChange={e=>{this.setState({price: e.target.value})}}/>\n\n                            <p>Số lượng</p>                    \n                            <input type=\"text\" class=\"form-control\" value={this.state.quantity} onChange={e=>{this.setState({quantity: e.target.value})}}/>\n\n                            <p>Màu sắc</p>                  \n                            <select class=\"form-control\" required=\"required\" onChange={e=>{this.setState({color_id: e.target.value})}}>\n                            {\n                                    colors.length>0 &&\n                                    colors.map(item=>{\n                                        return(\n                                            <option value={item.id}>{item.name}</option>\n                                        )\n                                    })\n                                }\n                            </select>\n                        </div>\n                    \n                    <div class=\"col-xs-4 col-sm-4 col-md-4 col-lg-4\">\n                    <form onSubmit={ this.onSubmit }>\n            <h1>Ảnh sản phẩm</h1>\n            <input type=\"file\" onChange={this.onChange} />\n            <button type=\"submit\">Upload File</button>\n            { $imagePreview }\n            \n\n          </form>   \n                    </div>\n                    </div>\n                    \n                \n                \n                \n                <div class=\"row\" style={{marginTop:\"30px\"}}>\n                    <button type=\"button\" class=\"btn btn-warning\" style={{width:\"130px\",height:\"34px\",marginLeft:\"200px\"}}>Hủy</button>\n                    \n                    <button type=\"button\" class=\"btn btn-default\" style={{width:\"130px\",height:\"34px\",marginLeft:\"50px\"}}\n                    onClick={e=>{this.props.addProduct(product_name,description,cat_id,price,quantity,shop_id,false,color_id,image)}}\n                    >Thêm và ẩn</button>\n                    \n                    <button type=\"button\" class=\"btn btn-success\" style={{width:\"130px\",height:\"34px\",marginLeft:\"50px\"}}\n                    onClick={e=>{this.props.addProduct(product_name,description,cat_id,price,quantity,shop_id,true,color_id,image)}}\n                    >Thêm và hiển thị</button>\n                </div>\n                \n                \n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        shop_id: state.shopState.shop_id,\n        subcategory:state.homeState.subcategories,\n        colors: state.shopState.colors\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return{\n        getSubCategory:()=> dispatch(getSubCategory()),\n        GetColors: ()=>dispatch(GetColors()),\n        addProduct:(product_name,description,cat_id,price,quantity,shop_id,permission,color_id,image)=>dispatch(addProduct(product_name,description,cat_id,price,quantity,shop_id,permission,color_id,image))\n    }\n}\n\nexport default connect(mapStateToProps,mapDispatchToProps)(AddProduct);"]},"metadata":{},"sourceType":"module"}