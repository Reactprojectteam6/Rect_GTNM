{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst GET_PRODUCT_DETAIL = 'GET_PRODUCT_DETAIL';\nconst GET_COLORS = 'GET_COLORS';\nconst GET_RATING = 'GET_RATING';\nconst GET_PRODUCT_BY_NAME_AND_COLOR = 'GET_PRODUCT_BY_NAME_AND_COLOR';\nconst SET_COMMENT = 'SET_COMMENT';\nconst SORT = 'SORT';\nconst GET_PRODUCT_ON_CART = 'GET_PRODUCT_ON_CART';\nexport function show(id) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(id)\n    }).then(response => {\n      if (response.status == \"200\") console.log(\"product_detail\");\n      console.log(response.data);\n      dispatch({\n        type: GET_PRODUCT_DETAIL,\n        Product: response.data\n      }); //tra ve cho form\n    });\n  };\n}\nexport function getColors(name) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(name, \"/Colors\")\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_COLORS,\n        Colors: response.data\n      }); //tra ve cho form\n    });\n  };\n}\nexport function getRating(id) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(id, \"/Rating\")\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_RATING,\n        Rate: response.data\n      }); //tra ve cho form\n    });\n  };\n} //detail chon mau\n\nexport function getProductByNameAndColor(product, name, color, shop_id) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(name, \"/\").concat(color, \"/\").concat(shop_id)\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_PRODUCT_BY_NAME_AND_COLOR,\n        Product: response.data\n      }); //tra ve cho form\n\n      if (response.status == \"404\") {\n        alert(\"Sản phẩm này hiện tại hết màu này,quý khách vui lòng chọn màu khác,xin cảm ơn ạ!!!\");\n        dispatch({\n          type: GET_PRODUCT_BY_NAME_AND_COLOR,\n          Product: product\n        });\n      }\n    });\n  };\n} //comment\n\nexport function setComment(user_id, product_id, rate) {\n  console.log(user_id);\n  console.log(product_id);\n  console.log(rate);\n  var comment = {\n    contents: \"san pham tot\",\n    rate: rate,\n    product_id: product_id,\n    user_id: user_id\n  };\n  var token = 'Bearer ' + localStorage.getItem('token');\n  return dispatch => {\n    axios({\n      method: 'post',\n      url: \"https://127.0.0.1:5001/api/Comment\",\n      data: comment,\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': token\n      }\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: \"SET_COMMENT\",\n        payload: true\n      });else dispatch({\n        type: \"SET_COMMENT\",\n        payload: false\n      });\n    });\n  };\n} //sort\n\nexport function sort(by, value) {\n  console.log(\"by\");\n  console.log(by);\n  console.log(\"value\");\n  console.log(value);\n  return dispatch => {\n    var id = null;\n\n    if (by == \"Rating\") {\n      if (value == \"1-3\") {\n        axios({\n          method: 'get',\n          url: \"https://127.0.0.1:5001/api/Product/Rating/\".concat(1, \"-\", 3),\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(res => {\n          if (res.status == \"200\") dispatch({\n            type: SORT,\n            payload: res.data\n          });\n        });\n      }\n\n      if (value == \"4-5\") {\n        axios({\n          method: 'get',\n          url: \"https://127.0.0.1:5001/api/Product/Rating/\".concat(4, \"-\", 5),\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(res => {\n          console.log(\"4-5\");\n          console.log(res.data);\n          if (res.status == \"200\") dispatch({\n            type: SORT,\n            payload: res.data\n          });\n        });\n      }\n    }\n\n    if (by == \"Price\") {\n      var data = [];\n      axios({\n        method: 'get',\n        url: \"https://127.0.0.1:5001/api/Product\",\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          'Authorization': 'Bearer ' + localStorage.getItem('token')\n        }\n      }).then(res => {\n        if (res.data.length > 0) {\n          data = res.data;\n\n          if (value == \"1-300000\") {\n            const result = data.filter(data => data.price > 1 && data.price < 301000);\n            dispatch({\n              type: SORT,\n              payload: result\n            });\n          }\n\n          if (value == \"300000-500000\") {\n            const result = data.filter(data => data.price > 301000 && data.price < 501000);\n            console.log(\"result\");\n            dispatch({\n              type: SORT,\n              payload: result\n            });\n          }\n\n          if (value == \"500000-1000000\") {\n            console.log(\"result\");\n            const result = data.filter(data => data.price > 501000 && data.price < 1000000);\n            dispatch({\n              type: SORT,\n              payload: result\n            });\n          }\n        }\n      });\n    }\n\n    if (by == \"Sort\") var data = [];\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product\",\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.data.length > 0) {\n        data = res.data;\n\n        if (value == \"Tên sản phẩm\") {\n          const result = data.sort((a, b) => a.product_name.localeCompare(b.product_name, 'es', {\n            sensitivity: 'base'\n          }));\n          dispatch({\n            type: SORT,\n            payload: result\n          });\n        }\n\n        if (value == \"Giá\") {\n          const result = data.sort(function (a, b) {\n            return a.price - b.price;\n          });\n          dispatch({\n            type: SORT,\n            payload: result\n          });\n        }\n      }\n    });\n  };\n}\nexport function getProductOnCart(cart) {\n  console.log(cart);\n  return dispatch => {\n    API(cart, data => {\n      if (!data) {\n        console.log(\"data\");\n        console.log(data);\n        dispatch({\n          type: GET_PRODUCT_ON_CART,\n          payload: data\n        }); //tra ve cho form\n      }\n    });\n  };\n}\n\nasync function API(cart, callback) {\n  var list = [];\n\n  for (var i = 0; i < cart.length; i++) {\n    await axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(cart[i].product.id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.status == \"200\") {\n        list.push(response.data);\n      }\n    });\n  }\n\n  return callback(list);\n}\n\nvar data = JSON.parse(localStorage.getItem('detail'));\nvar color = JSON.parse(localStorage.getItem('color'));\nvar dt1 = localStorage.getItem('rate');\nvar filter = JSON.parse(localStorage.getItem('filter'));\nvar dt2 = JSON.parse(localStorage.getItem('productOrder'));\nvar initialState = {\n  Product: data ? data : [],\n  Colors: color ? color : [],\n  Sizes: [],\n  Rate: dt1 ? dt1 : null,\n  hasComment: null,\n  productsFilter: filter ? filter : [],\n  productInCart: dt2 ? dt2 : []\n};\nexport default function product_reducer(state = initialState, action) {\n  if (action.type == 'GET_PRODUCT_DETAIL') {\n    let newState = _objectSpread({}, state);\n\n    newState.Product = action.Product;\n    localStorage.setItem('detail', JSON.stringify(newState.Product));\n    return newState;\n  }\n\n  if (action.type == 'GET_COLORS') {\n    let newState = _objectSpread({}, state);\n\n    newState.Colors = action.Colors;\n    console.log(newState.Colors);\n    localStorage.setItem('color', JSON.stringify(newState.Colors));\n    return newState;\n  }\n\n  if (action.type == 'GET_RATING') {\n    let newState = _objectSpread({}, state);\n\n    newState.Rate = action.Rate;\n    console.log(newState.Rate);\n    localStorage.setItem(\"rate\", newState.Rate);\n    return newState;\n  }\n\n  if (action.type == 'GET_PRODUCT_BY_NAME_AND_COLOR') {\n    let newState = _objectSpread({}, state);\n\n    newState.Product = action.Product;\n    console.log(\"adashjfadsgfd\");\n    console.log(action.product);\n    console.log(newState.Product);\n    localStorage.setItem(\"detail\", JSON.stringify(newState.Product));\n    return newState;\n  }\n\n  if (action.type == \"SET_COMMENT\") {\n    let newState = _objectSpread({}, state);\n\n    newState.hasComment = action.payload;\n    if (newState.hasComment == true) alert(\"cam on danh gia ve san pham nay cua ban\");\n    return newState;\n  }\n\n  if (action.type == 'SORT') {\n    let newState = _objectSpread({}, state);\n\n    newState.productsFilter = action.payload;\n    localStorage.setItem(\"filter\", JSON.stringify(newState.productsFilter));\n    return newState;\n  }\n\n  if (action.type == 'GET_PRODUCT_ON_CART') {\n    let newState = _objectSpread({}, state);\n\n    newState.productInCart = action.payload;\n    localStorage.setItem('productOrder', JSON.stringify(newState.productInCart));\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/product_reducer.js"],"names":["axios","GET_PRODUCT_DETAIL","GET_COLORS","GET_RATING","GET_PRODUCT_BY_NAME_AND_COLOR","SET_COMMENT","SORT","GET_PRODUCT_ON_CART","show","id","dispatch","method","url","then","response","status","console","log","data","type","Product","getColors","name","Colors","getRating","Rate","getProductByNameAndColor","product","color","shop_id","alert","setComment","user_id","product_id","rate","comment","contents","token","localStorage","getItem","headers","Accept","payload","sort","by","value","res","length","result","filter","price","a","b","product_name","localeCompare","sensitivity","getProductOnCart","cart","API","callback","list","i","push","JSON","parse","dt1","dt2","initialState","Sizes","hasComment","productsFilter","productInCart","product_reducer","state","action","newState","setItem","stringify"],"mappings":"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","sourcesContent":["\r\nimport axios from 'axios';\r\nconst GET_PRODUCT_DETAIL = 'GET_PRODUCT_DETAIL';   \r\nconst GET_COLORS='GET_COLORS';\r\nconst GET_RATING='GET_RATING';\r\nconst GET_PRODUCT_BY_NAME_AND_COLOR='GET_PRODUCT_BY_NAME_AND_COLOR';\r\nconst SET_COMMENT='SET_COMMENT';\r\nconst SORT='SORT';\r\nconst GET_PRODUCT_ON_CART='GET_PRODUCT_ON_CART';\r\nexport function show(id) {\r\n   return dispatch => {\r\n\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${id}`,\r\n    \r\n     \r\n    }).then(response => {\r\n      if(response.status==\"200\")\r\n      console.log(\"product_detail\");\r\n      console.log(response.data);\r\n      dispatch({type:GET_PRODUCT_DETAIL,Product:response.data});//tra ve cho form\r\n    \r\n    })\r\n        \r\n   \r\n  }\r\n}\r\nexport function getColors(name)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${name}/Colors`,\r\n    \r\n     \r\n    }).then(response => {\r\n      if(response.status==\"200\")\r\n    dispatch({type:GET_COLORS,Colors:response.data});//tra ve cho form\r\n    \r\n    })\r\n}\r\n}\r\n\r\nexport function getRating(id)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${id}/Rating`,\r\n    \r\n     \r\n    }).then(response => {\r\n      if(response.status==\"200\")\r\n    dispatch({type:GET_RATING,Rate:response.data});//tra ve cho form\r\n    })\r\n\r\n}\r\n\r\n}\r\n//detail chon mau\r\nexport function getProductByNameAndColor(product,name,color,shop_id)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${name}/${color}/${shop_id}`,\r\n     }).then(response => {\r\n      if(response.status==\"200\")\r\n     \r\n    dispatch({type:GET_PRODUCT_BY_NAME_AND_COLOR,Product:response.data});//tra ve cho form\r\n    if(response.status==\"404\")\r\n    {  alert(\"Sản phẩm này hiện tại hết màu này,quý khách vui lòng chọn màu khác,xin cảm ơn ạ!!!\")\r\n      dispatch({type:GET_PRODUCT_BY_NAME_AND_COLOR,Product:product})\r\n     }\r\n    })\r\n\r\n}\r\n\r\n}\r\n//comment\r\nexport function setComment(user_id,product_id,rate)\r\n{   console.log(user_id);\r\n    console.log(product_id);\r\n    console.log(rate); \r\n  var comment={\r\n  contents :\"san pham tot\",\r\n  rate :rate,\r\n  product_id:product_id,\r\n  user_id :user_id\r\n    }\r\n    var token='Bearer '+localStorage.getItem('token');\r\n   return dispatch=>{\r\n  axios(\r\n\r\n    {  method:'post',\r\n       url: `https://127.0.0.1:5001/api/Comment`,\r\n       data:comment,\r\n       headers:{\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Authorization':token\r\n      }\r\n        \r\n    }\r\n  ).then(response=>{\r\n    if(response.status==\"200\")\r\n    dispatch({type:\"SET_COMMENT\",payload:true});\r\n    else  dispatch({type:\"SET_COMMENT\",payload:false});\r\n  }\r\n\r\n  )\r\n}\r\n\r\n}\r\n//sort\r\n\r\n\r\nexport function sort(by,value) {\r\n  console.log(\"by\");\r\n  console.log(by);\r\n  console.log(\"value\");\r\n  console.log(value);\r\nreturn dispatch => {\r\n  var id=null; \r\nif(by==\"Rating\")\r\n  { \r\n    if(value==\"1-3\")\r\n    {\r\n  axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/Product/Rating/${1}-${3}`,\r\n      headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n  }\r\n\r\n\r\n})\r\n.then(res => {\r\n     if(res.status==\"200\")  dispatch({type:SORT,payload:res.data});\r\n    } \r\n)\r\n  }\r\nif(value==\"4-5\")\r\n{\r\naxios({\r\n  method:'get',\r\n  url: `https://127.0.0.1:5001/api/Product/Rating/${4}-${5}`,\r\n  headers:{\r\n   'Content-Type': 'application/json',\r\n   Accept: 'application/json',\r\n   'Authorization':'Bearer '+localStorage.getItem('token')\r\n }\r\n\r\n\r\n})\r\n.then(res => {\r\n  console.log(\"4-5\")\r\n  console.log(res.data);\r\n     if(res.status==\"200\") dispatch({type:SORT,payload:res.data});\r\n    } \r\n)\r\n  }\r\n\r\n  }\r\n  \r\nif(by==\"Price\")\r\n{\r\n  var data=[];\r\n    axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/Product`,\r\n      headers:{\r\n       'Content-Type': 'application/json',\r\n       Accept: 'application/json',\r\n       'Authorization':'Bearer '+localStorage.getItem('token')\r\n     }\r\n    \r\n\r\n    })\r\n    .then(res => {\r\n    \r\n      if (res.data.length>0)\r\n        { data=res.data;\r\n          if(value==\"1-300000\")\r\n          {const result=data.filter(data =>data.price>1&&data.price<301000);\r\n            dispatch({type:SORT,payload:result});\r\n       \r\n          }\r\n          if(value==\"300000-500000\")\r\n          {\r\n            const result=data.filter(data =>data.price>301000&&data.price<501000);\r\n            console.log(\"result\");\r\n            dispatch({type:SORT,payload:result});\r\n          }\r\n          if(value==\"500000-1000000\")\r\n          {  console.log(\"result\");\r\n        \r\n            const result=data.filter(data =>data.price>501000&&data.price<1000000);\r\n            dispatch({type:SORT,payload:result});\r\n          }\r\n       } \r\n     }\r\n    )\r\n}\r\nif(by==\"Sort\")\r\nvar data=[];\r\naxios({\r\n  method:'get',\r\n  url: `https://127.0.0.1:5001/api/Product`,\r\n  headers:{\r\n   'Content-Type': 'application/json',\r\n   Accept: 'application/json',\r\n   'Authorization':'Bearer '+localStorage.getItem('token')\r\n }\r\n\r\n\r\n})\r\n.then(res => {\r\n\r\n  if (res.data.length>0)\r\n    { data=res.data;\r\n      if(value==\"Tên sản phẩm\")\r\n      {const result=data.sort((a, b) => a.product_name.localeCompare(b.product_name, 'es', {sensitivity: 'base'}))\r\n       dispatch({type:SORT,payload:result});\r\n      }\r\n      if(value==\"Giá\")\r\n      {\r\n        const result=data.sort(function(a, b){return a.price - b.price});\r\n        dispatch({type:SORT,payload:result});\r\n      }\r\n    }\r\n  })\r\n\r\n\r\n\r\n}\r\n}       \r\n\r\nexport  function getProductOnCart(cart)\r\n{ console.log(cart);\r\n  return dispatch => {\r\n    API(cart,data=> {\r\n      if (!data) {\r\n        console.log(\"data\");\r\n        console.log(data);\r\n        dispatch({type: GET_PRODUCT_ON_CART,payload:data});\r\n        //tra ve cho form\r\n      }\r\n    })\r\n}\r\n}\r\nasync function API(cart,callback)\r\n{  var list=[];\r\n  for(var i=0;i<cart.length;i++)\r\n  {  \r\n    await axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${cart[i].product.id}`,\r\n      headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n  }\r\n}).then(response=>{\r\n  if(response.status==\"200\")\r\n  {\r\n     list.push(response.data);\r\n  }\r\n\r\n     })\r\n    }\r\nreturn callback(list);\r\n\r\n\r\n\r\n\r\n}\r\n\r\nvar data = JSON.parse(localStorage.getItem('detail'));\r\nvar color=JSON.parse(localStorage.getItem('color'));\r\nvar dt1 = localStorage.getItem('rate');\r\nvar filter=JSON.parse(localStorage.getItem('filter'));\r\nvar dt2=JSON.parse(localStorage.getItem('productOrder'));\r\nvar initialState =\r\n{ Product:data ? data : [],\r\n  Colors:color?color:[],\r\n  Sizes:[],\r\n  Rate:dt1?dt1:null,\r\n  hasComment:null,\r\n  productsFilter:filter?filter:[],\r\n  productInCart:dt2?dt2:[]\r\n}\r\nexport default function product_reducer(state =initialState, action) {\r\n  if(action.type=='GET_PRODUCT_DETAIL')\r\n  { let newState={...state};\r\n    newState.Product=action.Product\r\n    localStorage.setItem('detail', JSON.stringify(newState.Product));\r\n    return newState;\r\n  }\r\n\r\n  if(action.type=='GET_COLORS')\r\n  { let newState={...state};\r\n    newState.Colors=action.Colors;\r\n    console.log(newState.Colors);\r\n    localStorage.setItem('color', JSON.stringify(newState.Colors));\r\n    return newState;\r\n  }\r\n  if(action.type=='GET_RATING')\r\n  { let newState={...state};\r\n    newState.Rate=action.Rate;\r\n    console.log(newState.Rate);\r\n    localStorage.setItem(\"rate\",newState.Rate);\r\n    return newState;\r\n  }\r\n  if(action.type=='GET_PRODUCT_BY_NAME_AND_COLOR')\r\n  { let newState={...state};\r\n    newState.Product=action.Product;\r\n    console.log(\"adashjfadsgfd\");\r\n    console.log(action.product);\r\n    console.log(newState.Product);\r\n    localStorage.setItem(\"detail\",JSON.stringify(newState.Product));\r\n    return newState;\r\n  }\r\n   if(action.type==\"SET_COMMENT\")\r\n   {\r\n    let newState={...state};\r\n    newState.hasComment=action.payload;\r\n    if(newState.hasComment==true) alert(\"cam on danh gia ve san pham nay cua ban\");\r\n    return newState;\r\n   }\r\n   if(action.type=='SORT')\r\n   { let newState={...state};\r\n   newState.productsFilter=action.payload;\r\n   localStorage.setItem(\"filter\",JSON.stringify(newState.productsFilter));\r\n   return newState;\r\n\r\n   }\r\n   if(action.type=='GET_PRODUCT_ON_CART')\r\n   {\r\n    let newState={...state};\r\n    newState.productInCart=action.payload;\r\n    localStorage.setItem('productOrder',JSON.stringify(newState.productInCart));\r\n    return newState;\r\n   }\r\n  else return state;\r\n}"]},"metadata":{},"sourceType":"module"}