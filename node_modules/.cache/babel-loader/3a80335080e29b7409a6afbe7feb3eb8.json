{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nconst PAYMENT_BY_PAYPAL = 'PAYMENT_BY_PAYPAL';\n\nfunction check(a, b) {\n  for (let i = 0; i < b.length; i++) {\n    if (a == b[i]) return true;\n  }\n\n  return false;\n}\n\nexport function paymentByPaypal(cart) {\n  return dispatch => {\n    API(cart, data => {\n      dispatch({\n        type: PAYMENT_BY_PAYPAL,\n        payload: data\n      }); //tra ve cho form\n    });\n  };\n}\n\nasync function API(cart, callback) {\n  var list_shop_id = [];\n  list_shop_id[0] = cart[0].product.shop_id;\n\n  for (let i = 1; i < cart.length; i++) {\n    if (check(cart[i].product.shop_id, list_shop_id) == false) list_shop_id.push(cart[i].product.shop_id);\n  }\n\n  var list_order = [];\n\n  for (let i = 0; i < list_shop_id.length; i++) {\n    let sum = 0; //tinh tong tien cua tung shop\n\n    let list_product = []; //list san pham mua cua tung shop\n\n    let paypal;\n\n    for (let j = 0; j < cart.length; j++) {\n      if (cart[j].product.shop_id == list_shop_id[i]) {\n        list_product.push(cart[j]);\n      }\n    }\n\n    for (let k = 0; k < list_product.length; k++) sum += list_product[k].product.price * list_product[k].quantity;\n\n    await axios.get({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Shop/Paypal/\".concat(list_shop_id[i]),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(Response => {\n      if (Response.status == \"200\") paypal = Response.data;\n    });\n    let order = {\n      list_product: list_product,\n      sum: sum,\n      paypal: paypal\n    };\n    list_order.push(order);\n  }\n\n  callback(list_order);\n}\n\nvar data = JSON.parse(localStorage.getItem('paypal'));\nvar initialState = {\n  paypal: data ? data : []\n};\nexport default function paypal_reducer(state = initialState, action) {\n  if (action.type == 'PAYMENT_BY_PAYPAL') {\n    let newState = _objectSpread({}, state);\n\n    newState.paypal = action.payload;\n    localStorage.setItem('paypal', JSON.stringify(newState.paypal));\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/paypal_reducer.js"],"names":["PAYMENT_BY_PAYPAL","check","a","b","i","length","paymentByPaypal","cart","dispatch","API","data","type","payload","callback","list_shop_id","product","shop_id","push","list_order","sum","list_product","paypal","j","k","price","quantity","axios","get","method","url","headers","Accept","localStorage","getItem","then","Response","status","order","JSON","parse","initialState","paypal_reducer","state","action","newState","setItem","stringify"],"mappings":"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","sourcesContent":["const PAYMENT_BY_PAYPAL='PAYMENT_BY_PAYPAL';\r\nfunction check(a,b)\r\n{  for(let i=0;i<b.length;i++)\r\n   {\r\n     if(a==b[i]) return true;\r\n   }\r\n  return false;\r\n}\r\nexport function paymentByPaypal(cart) {\r\n    return dispatch => {\r\n       API(cart,data => {\r\n           dispatch({type:PAYMENT_BY_PAYPAL,payload:data});//tra ve cho form\r\n          \r\n      });\r\n    }\r\n  }\r\n\r\nasync function API(cart,callback)\r\n{   var list_shop_id=[];\r\n    list_shop_id[0]=cart[0].product.shop_id;\r\n    for (let i = 1; i < cart.length; i++) {\r\n       if(check(cart[i].product.shop_id,list_shop_id)==false) list_shop_id.push(cart[i].product.shop_id);\r\n\r\n     }\r\n     var list_order=[];\r\n     for(let i=0;i<list_shop_id.length;i++)\r\n      { let sum=0;//tinh tong tien cua tung shop\r\n        let list_product=[]//list san pham mua cua tung shop\r\n        let paypal;\r\n       for(let j=0;j<cart.length;j++)\r\n        {\r\n          if(cart[j].product.shop_id==list_shop_id[i]) \r\n            {  list_product.push(cart[j]);\r\n            }\r\n        }\r\n        for(let k=0;k<list_product.length;k++) sum+=list_product[k].product.price*list_product[k].quantity;\r\n         await axios.get({\r\n            method:'get',\r\n            url: `https://127.0.0.1:5001/api/Shop/Paypal/${list_shop_id[i]}`,\r\n            headers:{\r\n             'Content-Type': 'application/json',\r\n             Accept: 'application/json',\r\n             'Authorization':'Bearer '+localStorage.getItem('token')\r\n            }\r\n\r\n             }).then(Response=>{if(Response.status==\"200\") paypal=Response.data;\r\n               \r\n                  \r\n            })\r\n          let order={\r\n           list_product:list_product,\r\n           sum:sum,\r\n           paypal:paypal\r\n\r\n          }  \r\n          list_order.push(order);\r\n        \r\n        \r\n            \r\n    }\r\n    callback(list_order);\r\n\r\n}\r\nvar data=JSON.parse(localStorage.getItem('paypal'));\r\nvar initialState =\r\n{ paypal:data?data:[]\r\n}\r\nexport default function paypal_reducer(state =initialState, action) {\r\n  if(action.type=='PAYMENT_BY_PAYPAL')\r\n  { let newState={...state};\r\n    newState.paypal=action.payload\r\n    localStorage.setItem('paypal', JSON.stringify(newState.paypal));\r\n    return newState;\r\n  }\r\n\r\n  else return state;\r\n}"]},"metadata":{},"sourceType":"module"}