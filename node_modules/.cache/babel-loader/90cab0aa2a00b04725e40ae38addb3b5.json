{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst GET_USER = 'GET_USER';\nconst UPDATE_USER = 'UPDATE_USER';\nconst DELETE_USER = 'DELETE_USER';\nexport function getUser(user) {\n  return dispatch => {\n    dispatch({\n      type: GET_USER,\n      payload: user\n    });\n  };\n}\nexport function updateUser(id, user_name, email, phone, address, password, newpassword, role) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(Response => {\n      if (Response.status == \"200\") {\n        if (Response.data.password == password) {\n          if (password == newpassword) {\n            var user = {\n              id: id,\n              user_name: user_name,\n              password: newpassword,\n              email: email,\n              phone: phone,\n              address: address,\n              role: role\n            };\n            axios({\n              method: 'put',\n              url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n              data: user,\n              headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json',\n                'Authorization': 'Bearer ' + localStorage.getItem('token')\n              }\n            }).then(res => {\n              if (res.status == \"200\") {\n                alert(\"cap nhat thanh cong!!\");\n                dispatch({\n                  type: UPDATE_USER,\n                  payload: user\n                });\n              }\n            });\n          } else {\n            alert(\"Password va Password confirm khong khop,vui long nhap lai\");\n          }\n        } else {\n          alert(\"password cu khong chinh xac!!\");\n        }\n      }\n    });\n  };\n}\nexport async function deleteUser(id) {\n  var check = false;\n  var orders = [];\n  await axios({\n    method: 'get',\n    url: \"https://127.0.0.1:5001/api/Order/user/\".concat(id),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      'Authorization': 'Bearer ' + localStorage.getItem('token')\n    }\n  }).then(res => {\n    if (res.status == \"200\") {\n      check = true;\n      orders = res.data;\n    }\n  });\n\n  if (check == false) {\n    await axios({\n      method: 'delete',\n      url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") {\n        alert(\"xoa user thanh cong!!\");\n      }\n    });\n  } else {\n    for (var i = 0; i < orders.length; i++) {\n      for (var j = 0; j < orders[i].Order_Details; j++) {\n        await axios({\n          method: 'delete',\n          url: \"https://127.0.0.1:5001/api/OrderDetail/\".concat(orders[i].Order_Details[j].id),\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(res => {});\n      }\n\n      await axios({\n        method: 'delete',\n        url: \"https://127.0.0.1:5001/api/Order/\".concat(orders[i].id),\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          'Authorization': 'Bearer ' + localStorage.getItem('token')\n        }\n      }).then(res => {});\n    }\n\n    await axios({\n      method: 'delete',\n      url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") {\n        alert(\"xoa user thanh cong!!\");\n      }\n    });\n  }\n}\nvar dt = JSON.parse(localStorage.getItem('User'));\nvar initialState = {\n  user: dt ? dt : null\n};\nexport default function admin_reducer(state = initialState, action) {\n  if (action.type == 'GET_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.user = action.payload;\n    localStorage.setItem('User', JSON.stringify(newState.user));\n    return newState;\n  }\n\n  if (action.type == 'UPDATE_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.user = action.payload;\n    localStorage.setItem('User', JSON.stringify(newState.user));\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/admin_reducer.js"],"names":["axios","GET_USER","UPDATE_USER","DELETE_USER","getUser","user","dispatch","type","payload","updateUser","id","user_name","email","phone","address","password","newpassword","role","method","url","headers","Accept","localStorage","getItem","then","Response","status","data","res","alert","deleteUser","check","orders","i","length","j","Order_Details","dt","JSON","parse","initialState","admin_reducer","state","action","newState","setItem","stringify"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst GET_USER='GET_USER';\r\nconst UPDATE_USER='UPDATE_USER';\r\nconst DELETE_USER='DELETE_USER';\r\nexport function getUser(user)\r\n{\r\nreturn  dispatch=>{\r\ndispatch({type:GET_USER,payload:user});\r\n\r\n}\r\n}\r\nexport function  updateUser(id,user_name,email,phone,address,password,newpassword,role)\r\n{  \r\n    return dispatch => {axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/User/${id}`,\r\n      headers:{\r\n       'Content-Type': 'application/json',\r\n       Accept: 'application/json',\r\n       'Authorization':'Bearer '+localStorage.getItem('token')\r\n     }\r\n  \r\n     }).then(Response=>{\r\n      if(Response.status==\"200\") {\r\n      if(Response.data.password==password) \r\n       { if(password==newpassword)\r\n         {  var user={\r\n          id:id,\r\n          user_name:user_name,\r\n          password:newpassword,\r\n          email :email,\r\n          phone:phone,\r\n          address:address,\r\n          role:role\r\n         }\r\n          axios({\r\n              method:'put',\r\n              url: `https://127.0.0.1:5001/api/User/${id}`,\r\n              data:user,\r\n               headers:{\r\n                'Content-Type': 'application/json',\r\n                Accept: 'application/json',\r\n                'Authorization':'Bearer '+localStorage.getItem('token')\r\n              }\r\n             }).then(res=>{\r\n              if(res.status==\"200\")\r\n                 {alert(\"cap nhat thanh cong!!\")\r\n                   dispatch({type:UPDATE_USER,payload:user});\r\n                  \r\n                 }\r\n  \r\n                  \r\n             })   \r\n         }   \r\n         else {alert(\"Password va Password confirm khong khop,vui long nhap lai\");}\r\n  \r\n       }\r\n       else {alert(\"password cu khong chinh xac!!\");}\r\n  \r\n      }\r\n  \r\n  \r\n     })\r\n       \r\n      }\r\n}\r\nexport async function deleteUser(id)\r\n{ var check=false;\r\n  var orders=[];\r\n  await axios({\r\n  method:'get',\r\n  url: `https://127.0.0.1:5001/api/Order/user/${id}`,\r\n  headers:{\r\n   'Content-Type': 'application/json',\r\n   Accept: 'application/json',\r\n   'Authorization':'Bearer '+localStorage.getItem('token')\r\n }\r\n\r\n }).then(res=>{\r\n  if(res.status==\"200\") {check=true;orders=res.data}\r\n})\r\nif(check==false) {\r\n  await axios({\r\n    method:'delete',\r\n    url: `https://127.0.0.1:5001/api/User/${id}`,\r\n    headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n   }\r\n  \r\n   }).then(res=>{\r\n     if(res.status==\"200\") {alert(\"xoa user thanh cong!!\");}\r\n   })\r\n}\r\nelse {\r\n   for(var i=0;i<orders.length;i++)\r\n   {  for(var j=0;j<orders[i].Order_Details;j++)\r\n\r\n    {\r\n      await axios({\r\n     method:'delete',\r\n     url: `https://127.0.0.1:5001/api/OrderDetail/${orders[i].Order_Details[j].id}`,\r\n     headers:{\r\n    'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n   }\r\n  \r\n   }).then(res=>{\r\n   })\r\n  }\r\n   await axios({\r\n    method:'delete',\r\n    url: `https://127.0.0.1:5001/api/Order/${orders[i].id}`,\r\n    headers:{\r\n   'Content-Type': 'application/json',\r\n    Accept: 'application/json',\r\n    'Authorization':'Bearer '+localStorage.getItem('token')\r\n  }\r\n \r\n  }).then(res=>{\r\n  })\r\n          \r\n\r\n   }\r\n\r\n   await axios({\r\n    method:'delete',\r\n    url: `https://127.0.0.1:5001/api/User/${id}`,\r\n    headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n   }\r\n  \r\n   }).then(res=>{\r\n     if(res.status==\"200\") {alert(\"xoa user thanh cong!!\");}\r\n   })\r\n \r\n\r\n\r\n}\r\n\r\n\r\n}\r\n \r\nvar dt=JSON.parse(localStorage.getItem('User'));\r\nvar initialState={\r\n   user:dt?dt:null\r\n  }\r\n  export default function admin_reducer(state =initialState, action) {\r\n    if(action.type=='GET_USER')\r\n    {  \r\n      let newState={...state};\r\n      newState.user=action.payload;\r\n      localStorage.setItem('User',JSON.stringify(newState.user));\r\n      return newState;\r\n    }\r\n    if(action.type=='UPDATE_USER')\r\n    {\r\n      let newState={...state};\r\n      newState.user=action.payload;\r\n      localStorage.setItem('User',JSON.stringify(newState.user));\r\n      return newState;\r\n    }\r\n    else return state;\r\n  }"]},"metadata":{},"sourceType":"module"}