{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst PAYMENT_BY_PAYPAL = 'PAYMENT_BY_PAYPAL';\n\nfunction check(a, b) {\n  for (let i = 0; i < b.length; i++) {\n    if (a == b[i]) return true;\n  }\n\n  return false;\n}\n\nexport function paymentByPaypal(cart) {\n  console.log(\"do cho dien\");\n  console.log(cart);\n  return dispatch => {\n    API(cart, data => {\n      dispatch({\n        type: PAYMENT_BY_PAYPAL,\n        payload: data\n      }); //tra ve cho form\n    });\n  };\n}\n\nasync function API(cart, callback) {\n  console.log(\"ahiii\");\n  var list_shop_id = [];\n  var list_order = [];\n  list_shop_id[0] = cart[0].product.shop_id;\n\n  for (let i = 1; i < cart.length; i++) {\n    if (check(cart[i].product.shop_id, list_shop_id) == false) list_shop_id.push(cart[i].product.shop_id);\n  }\n\n  for (var i = 0; i < list_shop_id.length; i++) {\n    console.log(list_shop_id[i]);\n    let shop_id = list_shop_id[i];\n    let sum = 0; //tinh tong tien cua tung shop\n\n    let list_product = []; //list san pham mua cua tung shop\n\n    let paypal;\n\n    for (let j = 0; j < cart.length; j++) {\n      if (cart[j].product.shop_id == list_shop_id[i]) {\n        list_product.push(cart[j]);\n      }\n    }\n\n    console.log(list_product);\n\n    for (let k = 0; k < list_product.length; k++) sum += list_product[k].product.price * list_product[k].quantity;\n\n    console.log(sum);\n    await axios.get({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Shop/Paypal/\".concat(shop_id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(Response => {\n      if (Response.status == \"200\") paypal = Response.data;\n    });\n    console.log(list_product);\n    console.log(sum);\n    console.log(paypal);\n    let order = {\n      list_product: list_product,\n      sum: sum,\n      paypal: paypal\n    };\n    list_order.push(order);\n  }\n\n  console.log(list_order);\n  callback(list_order);\n}\n\nvar data = JSON.parse(localStorage.getItem('paypal'));\nvar initialState = {\n  paypal: data ? data : []\n};\nexport default function paypal_reducer(state = initialState, action) {\n  if (action.type == 'PAYMENT_BY_PAYPAL') {\n    let newState = _objectSpread({}, state);\n\n    newState.paypal = action.payload;\n    localStorage.setItem('paypal', JSON.stringify(newState.paypal));\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/paypal_reducer.js"],"names":["axios","PAYMENT_BY_PAYPAL","check","a","b","i","length","paymentByPaypal","cart","console","log","dispatch","API","data","type","payload","callback","list_shop_id","list_order","product","shop_id","push","sum","list_product","paypal","j","k","price","quantity","get","method","url","headers","Accept","localStorage","getItem","then","Response","status","order","JSON","parse","initialState","paypal_reducer","state","action","newState","setItem","stringify"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst PAYMENT_BY_PAYPAL='PAYMENT_BY_PAYPAL';\r\nfunction check(a,b)\r\n{  for(let i=0;i<b.length;i++)\r\n   {\r\n     if(a==b[i]) return true;\r\n   }\r\n  return false;\r\n}\r\nexport function paymentByPaypal(cart) {\r\n    console.log(\"do cho dien\");\r\n    console.log(cart);\r\n    return dispatch => {\r\n       API(cart,data => {\r\n           dispatch({type:PAYMENT_BY_PAYPAL,payload:data});//tra ve cho form\r\n          \r\n      });\r\n    }\r\n  }\r\n\r\nasync function API(cart,callback)\r\n{   console.log(\"ahiii\");\r\n    var list_shop_id=[];\r\n    var list_order=[];\r\n    list_shop_id[0]=cart[0].product.shop_id;\r\n    for (let i = 1; i < cart.length; i++) {\r\n       if(check(cart[i].product.shop_id,list_shop_id)==false) list_shop_id.push(cart[i].product.shop_id);\r\n\r\n     }\r\n     for(var i=0;i<list_shop_id.length;i++)\r\n      { \r\n          console.log(list_shop_id[i])\r\n        let shop_id=list_shop_id[i];\r\n         let sum=0;//tinh tong tien cua tung shop\r\n        let list_product=[]//list san pham mua cua tung shop\r\n        let paypal;\r\n       for(let j=0;j<cart.length;j++)\r\n        {\r\n          if(cart[j].product.shop_id==list_shop_id[i]) \r\n            {  list_product.push(cart[j]);\r\n            }\r\n        }\r\n       console.log(list_product);\r\n        for(let k=0;k<list_product.length;k++) sum+=list_product[k].product.price*list_product[k].quantity;\r\n        console.log(sum);\r\n         await axios.get({\r\n            method:'get',\r\n            url: `https://127.0.0.1:5001/api/Shop/Paypal/${shop_id}`,\r\n            headers:{\r\n             'Content-Type': 'application/json',\r\n             Accept: 'application/json',\r\n             'Authorization':'Bearer '+localStorage.getItem('token')\r\n            }\r\n\r\n             }).then(Response=>{if(Response.status==\"200\") paypal=Response.data;\r\n               \r\n                  \r\n            })\r\n            console.log(list_product);\r\n            console.log(sum);\r\n            console.log(paypal);\r\n          let order={\r\n           list_product:list_product,\r\n           sum:sum,\r\n           paypal:paypal\r\n\r\n          }  \r\n         \r\n          list_order.push(order);\r\n        \r\n        \r\n            \r\n    }\r\n    console.log(list_order);\r\n    callback(list_order);\r\n\r\n}\r\nvar data=JSON.parse(localStorage.getItem('paypal'));\r\nvar initialState =\r\n{ paypal:data?data:[]\r\n}\r\nexport default function paypal_reducer(state =initialState, action) {\r\n  if(action.type=='PAYMENT_BY_PAYPAL')\r\n  { let newState={...state};\r\n    newState.paypal=action.payload\r\n    localStorage.setItem('paypal', JSON.stringify(newState.paypal));\r\n    return newState;\r\n  }\r\n\r\n  else return state;\r\n}"]},"metadata":{},"sourceType":"module"}