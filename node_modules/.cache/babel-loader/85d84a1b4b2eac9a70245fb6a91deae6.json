{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from \"axios\";\nimport User from \"../Component/Admin/User\";\nconst UPDATE_USER = 'UPDATE_USER';\nconst USER = 'USER';\nexport function updateUser(id, user_name, email, phone, address, password, newpassword) {\n  return dispatch => {\n    callApi(id, user_name, email, phone, address, password, newpassword, data => {\n      if (!data) {\n        dispatch(setSuccess(data)); //tra ve cho form\n      } else {\n        dispatch(setSuccess(data));\n      }\n    });\n  };\n}\n\nfunction setSuccess(user) {\n  return {\n    type: UPDATE_USER,\n    user\n  };\n}\n\nfunction callApi(id, user_name, email, phone, address, password, newpassword, callback) {\n  axios({\n    method: 'get',\n    url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      'Authorization': 'Bearer ' + localStorage.getItem('token')\n    }\n  }).then(Response => {\n    if (Response.status == \"200\") {\n      if (Response.data.password == password) {\n        if (password == newpassword) {\n          var user = {\n            user_name: user_name,\n            password: newpassword,\n            email: email,\n            phone: phone,\n            address: address,\n            role: JSON.parse(localStorage.getItem('currentUser')).role\n          };\n          axios({\n            method: 'put',\n            url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n            data: user,\n            headers: {\n              'Content-Type': 'application/json',\n              Accept: 'application/json',\n              'Authorization': 'Bearer ' + localStorage.getItem('token')\n            }\n          }).then(res => {\n            if (res.status == \"200\") {\n              var user = {\n                id: user.id,\n                user_name: user_name,\n                email: email,\n                phone: phone,\n                address: address,\n                role: JSON.parse(localStorage.getItem('currentUser').role)\n              };\n              localStorage.setItem('currentUser', JSON.stringify(user));\n              alert(\"update thanh cong\");\n              return callback(user);\n            }\n          });\n        } else {\n          alert(\"Password va Password confirm khong khop,vui long nhap lai\");\n          callback(null);\n        }\n      } else {\n        alert(\"password cu khong chinh xac!!\");\n        callback(null);\n      }\n    }\n  });\n}\n\nexport function setUser() {\n  alert(\"sdjgfjsdf\");\n  return dispatch => {\n    dispatch({\n      type: USER,\n      payload: JSON.parse(localStorage.getItem('currentUser'))\n    });\n  };\n}\nvar user = JSON.parse(localStorage.getItem('currentUser'));\nvar initialState = {\n  user: user ? user : null\n};\nexport default function user_reducer(state = initialState, action) {\n  if (action.type == 'UPDATE_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.user = action.user;\n    return newState;\n  }\n\n  if (action.type == 'USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.user = action.payload;\n    alert(\"sdhfsdfgsdfgsdhfsd\");\n    return newState;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/user_reducer.js"],"names":["axios","User","UPDATE_USER","USER","updateUser","id","user_name","email","phone","address","password","newpassword","dispatch","callApi","data","setSuccess","user","type","callback","method","url","headers","Accept","localStorage","getItem","then","Response","status","role","JSON","parse","res","setItem","stringify","alert","setUser","payload","initialState","user_reducer","state","action","newState"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport User from \"../Component/Admin/User\";\r\nconst UPDATE_USER='UPDATE_USER';\r\nconst USER='USER';\r\nexport function  updateUser(id,user_name,email,phone,address,password,newpassword)\r\n{  \r\n    return dispatch => {\r\n        callApi(id,user_name,email,phone,address,password,newpassword,data=> {\r\n          if (!data) {\r\n            dispatch(setSuccess(data));//tra ve cho form\r\n          } else {\r\n            dispatch(setSuccess(data));\r\n          }\r\n        });\r\n      }\r\n}\r\nfunction setSuccess(user) {\r\n    return {\r\n      type:UPDATE_USER,\r\n      user\r\n    };\r\n  }\r\n\r\n  function callApi(id,user_name,email,phone,address,password,newpassword,callback)\r\n  { \r\n   axios({\r\n    method:'get',\r\n    url: `https://127.0.0.1:5001/api/User/${id}`,\r\n    headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n   }\r\n\r\n   }).then(Response=>{\r\n    if(Response.status==\"200\") {\r\n    if(Response.data.password==password) \r\n     { if(password==newpassword)\r\n       {  var user={\r\n        user_name:user_name,\r\n        password:newpassword,\r\n        email :email,\r\n        phone:phone,\r\n        address:address,\r\n        role:JSON.parse(localStorage.getItem('currentUser')).role\r\n       }\r\n        axios({\r\n            method:'put',\r\n            url: `https://127.0.0.1:5001/api/User/${id}`,\r\n            data:user,\r\n             headers:{\r\n              'Content-Type': 'application/json',\r\n              Accept: 'application/json',\r\n              'Authorization':'Bearer '+localStorage.getItem('token')\r\n            }\r\n           }).then(res=>{\r\n            if(res.status==\"200\")\r\n               { var user={\r\n                id:user.id,   \r\n                user_name:user_name,\r\n                email :email,\r\n                phone:phone,\r\n                address:address,\r\n                role:JSON.parse(localStorage.getItem('currentUser').role)\r\n                  }\r\n               localStorage.setItem('currentUser',JSON.stringify(user));\r\n               alert(\"update thanh cong\");\r\n               return callback(user);\r\n              \r\n               }\r\n\r\n                \r\n           })   \r\n       }   \r\n       else {alert(\"Password va Password confirm khong khop,vui long nhap lai\"); callback(null)}\r\n\r\n     }\r\n     else {alert(\"password cu khong chinh xac!!\"); callback(null);}\r\n\r\n    }\r\n\r\n\r\n   })\r\n\r\n\r\n  }\r\n export function setUser()\r\n { alert(\"sdjgfjsdf\");\r\n   return dispatch=>{\r\n     dispatch({type:USER,payload:JSON.parse(localStorage.getItem('currentUser'))})\r\n   }\r\n }\r\nvar user=JSON.parse(localStorage.getItem('currentUser'));\r\nvar initialState={\r\nuser:user?user:null,\r\n}\r\nexport default function user_reducer(state =initialState, action) {\r\n \r\n    if(action.type=='UPDATE_USER')\r\n    {  let newState={...state};\r\n      newState.user=action.user;\r\n      return newState;\r\n    }\r\n    if(action.type=='USER')\r\n    { let newState={...state};\r\n      newState.user=action.payload;\r\n      alert(\"sdhfsdfgsdfgsdhfsd\");\r\n      return newState;\r\n\r\n    }\r\n  \r\n        return state;\r\n    \r\n  }"]},"metadata":{},"sourceType":"module"}