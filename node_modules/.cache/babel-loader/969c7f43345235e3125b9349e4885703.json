{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst GET_PRODUCT_DETAIL = 'GET_PRODUCT_DETAIL';\nconst GET_COLORS = 'GET_COLORS';\nconst GET_RATING = 'GET_RATING';\nconst GET_PRODUCT_BY_NAME_AND_COLOR = 'GET_PRODUCT_BY_NAME_AND_COLOR';\nconst SET_COMMENT = 'SET_COMMENT';\nexport function show(product) {\n  return dispatch => {\n    dispatch({\n      type: GET_PRODUCT_DETAIL,\n      Product: product\n    }); //tra ve cho form\n  };\n}\nexport function getColors(name) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(name, \"/Colors\")\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_COLORS,\n        Colors: response.data\n      }); //tra ve cho form\n    });\n  };\n}\nexport function getRating(id) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(id, \"/Rating\")\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_RATING,\n        Rate: response.data\n      }); //tra ve cho form\n    });\n  };\n}\nexport function getProductByNameAndColor(product, name, color, shop_id) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(name, \"/\").concat(color, \"/\").concat(shop_id)\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_PRODUCT_BY_NAME_AND_COLOR,\n        Product: response.data\n      }); //tra ve cho form\n\n      if (response.status == \"404\") {\n        alert(\"Sản phẩm này hiện tại hết màu này,quý khách vui lòng chọn màu khác,xin cảm ơn ạ!!!\");\n        dispatch({\n          type: GET_PRODUCT_BY_NAME_AND_COLOR,\n          Product: product\n        });\n      }\n    });\n  };\n}\nexport function setComment(user_id, product_id, rate) {\n  console.log(user_id);\n  console.log(product_id);\n  console.log(rate);\n  var comment = {\n    contents: \"san pham tot\",\n    rate: rate,\n    product_id: product_id,\n    user_id: user_id\n  };\n  var token = 'Bearer ' + localStorage.getItem('token');\n  return dispatch => {\n    axios({\n      method: 'post',\n      url: (\"https://127.0.0.1:5001/api/Comment\", comment),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': token\n      }\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: \"SET_COMMENT\",\n        payload: true\n      });else dispatch({\n        type: \"SET_COMMENT\",\n        payload: false\n      });\n    });\n  };\n}\nvar data = JSON.parse(localStorage.getItem('detail'));\nvar color = JSON.parse(localStorage.getItem('color'));\nvar dt1 = localStorage.getItem('rate');\nvar initialState = {\n  Product: data ? data : [],\n  Colors: color ? color : [],\n  Sizes: [],\n  Rate: dt1 ? dt1 : null,\n  hasComment: null\n};\nexport default function product_reducer(state = initialState, action) {\n  if (action.type == 'GET_PRODUCT_DETAIL') {\n    let newState = _objectSpread({}, state);\n\n    newState.Product = action.Product;\n    localStorage.setItem('detail', JSON.stringify(newState.Product));\n    return newState;\n  }\n\n  if (action.type == 'GET_COLORS') {\n    let newState = _objectSpread({}, state);\n\n    newState.Colors = action.Colors;\n    console.log(newState.Colors);\n    localStorage.setItem('color', JSON.stringify(newState.Colors));\n    return newState;\n  }\n\n  if (action.type == 'GET_RATING') {\n    let newState = _objectSpread({}, state);\n\n    newState.Rate = action.Rate;\n    console.log(newState.Rate);\n    localStorage.setItem(\"rate\", newState.Rate);\n    return newState;\n  }\n\n  if (action.type == 'GET_PRODUCT_BY_NAME_AND_COLOR') {\n    let newState = _objectSpread({}, state);\n\n    newState.Product = action.Product;\n    console.log(\"adashjfadsgfd\");\n    console.log(action.product);\n    console.log(newState.Product);\n    localStorage.setItem(\"detail\", JSON.stringify(newState.Product));\n    return newState;\n  }\n\n  if (action.type == \"SET_COMMENT\") {\n    let newState = _objectSpread({}, state);\n\n    newState.hasComment = action.payload;\n    if (newState.hasComment == true) alert(\"cam on danh gia ve san pham nay cua ban\");\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/product_reducer.js"],"names":["axios","GET_PRODUCT_DETAIL","GET_COLORS","GET_RATING","GET_PRODUCT_BY_NAME_AND_COLOR","SET_COMMENT","show","product","dispatch","type","Product","getColors","name","method","url","then","response","status","Colors","data","getRating","id","Rate","getProductByNameAndColor","color","shop_id","alert","setComment","user_id","product_id","rate","console","log","comment","contents","token","localStorage","getItem","headers","Accept","payload","JSON","parse","dt1","initialState","Sizes","hasComment","product_reducer","state","action","newState","setItem","stringify"],"mappings":"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","sourcesContent":["\r\nimport axios from 'axios';\r\nconst GET_PRODUCT_DETAIL = 'GET_PRODUCT_DETAIL';   \r\nconst GET_COLORS='GET_COLORS';\r\nconst GET_RATING='GET_RATING';\r\nconst GET_PRODUCT_BY_NAME_AND_COLOR='GET_PRODUCT_BY_NAME_AND_COLOR';\r\nconst SET_COMMENT='SET_COMMENT';\r\nexport function show(product) {\r\n   return dispatch => {\r\n      dispatch({type:GET_PRODUCT_DETAIL,Product:product});//tra ve cho form\r\n        \r\n   \r\n  }\r\n}\r\nexport function getColors(name)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${name}/Colors`,\r\n    \r\n     \r\n    }).then(response => {\r\n      if(response.status==\"200\")\r\n    dispatch({type:GET_COLORS,Colors:response.data});//tra ve cho form\r\n    \r\n    })\r\n}\r\n}\r\n\r\nexport function getRating(id)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${id}/Rating`,\r\n    \r\n     \r\n    }).then(response => {\r\n      if(response.status==\"200\")\r\n    dispatch({type:GET_RATING,Rate:response.data});//tra ve cho form\r\n    })\r\n\r\n}\r\n\r\n}\r\n\r\nexport function getProductByNameAndColor(product,name,color,shop_id)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${name}/${color}/${shop_id}`,\r\n     }).then(response => {\r\n      if(response.status==\"200\")\r\n     \r\n    dispatch({type:GET_PRODUCT_BY_NAME_AND_COLOR,Product:response.data});//tra ve cho form\r\n    if(response.status==\"404\")\r\n    {  alert(\"Sản phẩm này hiện tại hết màu này,quý khách vui lòng chọn màu khác,xin cảm ơn ạ!!!\")\r\n      dispatch({type:GET_PRODUCT_BY_NAME_AND_COLOR,Product:product})\r\n     }\r\n    })\r\n\r\n}\r\n\r\n}\r\nexport function setComment(user_id,product_id,rate)\r\n{   console.log(user_id);\r\n    console.log(product_id);\r\n    console.log(rate); \r\n  var comment={\r\n  contents :\"san pham tot\",\r\n  rate :rate,\r\n  product_id:product_id,\r\n  user_id :user_id\r\n    }\r\n    var token='Bearer '+localStorage.getItem('token');\r\n   return dispatch=>{\r\n  axios(\r\n\r\n    {  method:'post',\r\n       url: (`https://127.0.0.1:5001/api/Comment`,comment),\r\n       headers:{\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Authorization':token\r\n      }\r\n        \r\n    }\r\n  ).then(response=>{\r\n    if(response.status==\"200\")\r\n    dispatch({type:\"SET_COMMENT\",payload:true});\r\n    else  dispatch({type:\"SET_COMMENT\",payload:false});\r\n  }\r\n\r\n  )\r\n}\r\n\r\n}\r\n\r\n\r\nvar data = JSON.parse(localStorage.getItem('detail'));\r\nvar color=JSON.parse(localStorage.getItem('color'));\r\nvar dt1 = localStorage.getItem('rate');\r\nvar initialState =\r\n{ Product:data ? data : [],\r\n  Colors:color?color:[],\r\n  Sizes:[],\r\n  Rate:dt1?dt1:null,\r\n  hasComment:null,\r\n}\r\nexport default function product_reducer(state =initialState, action) {\r\n  if(action.type=='GET_PRODUCT_DETAIL')\r\n  { let newState={...state};\r\n    newState.Product=action.Product\r\n    localStorage.setItem('detail', JSON.stringify(newState.Product));\r\n    return newState;\r\n  }\r\n\r\n  if(action.type=='GET_COLORS')\r\n  { let newState={...state};\r\n    newState.Colors=action.Colors;\r\n    console.log(newState.Colors);\r\n    localStorage.setItem('color', JSON.stringify(newState.Colors));\r\n    return newState;\r\n  }\r\n  if(action.type=='GET_RATING')\r\n  { let newState={...state};\r\n    newState.Rate=action.Rate;\r\n    console.log(newState.Rate);\r\n    localStorage.setItem(\"rate\",newState.Rate);\r\n    return newState;\r\n  }\r\n  if(action.type=='GET_PRODUCT_BY_NAME_AND_COLOR')\r\n  { let newState={...state};\r\n    newState.Product=action.Product;\r\n    console.log(\"adashjfadsgfd\");\r\n    console.log(action.product);\r\n    console.log(newState.Product);\r\n    localStorage.setItem(\"detail\",JSON.stringify(newState.Product));\r\n    return newState;\r\n  }\r\n   if(action.type==\"SET_COMMENT\")\r\n   {\r\n    let newState={...state};\r\n    newState.hasComment=action.payload;\r\n    if(newState.hasComment==true) alert(\"cam on danh gia ve san pham nay cua ban\");\r\n    return newState;\r\n   }\r\n  else return state;\r\n}"]},"metadata":{},"sourceType":"module"}