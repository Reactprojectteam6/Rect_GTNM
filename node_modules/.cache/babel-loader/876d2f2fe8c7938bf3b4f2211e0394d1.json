{"ast":null,"code":"const ADD_TO_CART = 'ADD_TO_CART';\nconst DELETE_PRODUCT_IN_CART = 'DELETE_PRODUCT_IN_CART';\nconst UPDATE_PRODUCT_IN_CART = 'UPDATE_PRODUCT_IN_CART';\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\nexport function actAddToCart(product, quantity) {\n  return {\n    type: ADD_TO_CART,\n    product,\n    quantity\n  };\n}\nexport function actDeleteProductInCart(product) {\n  return {\n    type: DELETE_PRODUCT_IN_CART,\n    product\n  };\n}\nexport function actUpdateProductInCart(product, quantity) {\n  return {\n    type: UPDATE_PRODUCT_IN_CART,\n    product,\n    quantity\n  };\n}\nexport default function cart_reducer(state = initialState, action) {\n  var product = action.product,\n      quantity = action.quantity;\n  var index = -1; // Không tìm thấy => index = -1\n\n  if (action.type == 'ADD_TO_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state[index].quantity += parseInt(quantity);\n    } else {\n      state.push({\n        product,\n        quantity\n      });\n      alert(\"add product into cart successfully\");\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  }\n\n  if (action.type == 'DELETE_PRODUCT_IN_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state.splice(index, 1);\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  }\n\n  if (action.type == 'UPDATE_PRODUCT_IN_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state[index].quantity = quantity;\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  } else return [...state];\n}\n\nvar findProductInCart = (cart, product) => {\n  //tim product da co trong cart hay chua\n  var index = -1;\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/cart_reducer.js"],"names":["ADD_TO_CART","DELETE_PRODUCT_IN_CART","UPDATE_PRODUCT_IN_CART","data","JSON","parse","localStorage","getItem","initialState","actAddToCart","product","quantity","type","actDeleteProductInCart","actUpdateProductInCart","cart_reducer","state","action","index","findProductInCart","parseInt","push","alert","setItem","stringify","splice","cart","length","i","id"],"mappings":"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","sourcesContent":["const ADD_TO_CART = 'ADD_TO_CART';\nconst DELETE_PRODUCT_IN_CART = 'DELETE_PRODUCT_IN_CART';\nconst UPDATE_PRODUCT_IN_CART='UPDATE_PRODUCT_IN_CART'\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\n\nexport function  actAddToCart(product, quantity) {\n    return {\n        type:ADD_TO_CART,\n        product,\n        quantity\n    }\n}\nexport function  actDeleteProductInCart(product){\n    return {\n        type :DELETE_PRODUCT_IN_CART,\n        product\n    }\n}\n\nexport function  actUpdateProductInCart(product, quantity ){\n    return {\n        type :UPDATE_PRODUCT_IN_CART,\n        product,\n        quantity\n    }\n}\nexport default function cart_reducer(state =initialState, action)  {\n    var { product, quantity } = action;\n    var index = -1; // Không tìm thấy => index = -1\n    if(action.type=='ADD_TO_CART')\n    {        \n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state[index].quantity += parseInt(quantity);\n            } else {\n                state.push({\n                    product,\n                    quantity\n                });\n                alert(\"add product into cart successfully\");\n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n\n        }       \n    if(action.type=='DELETE_PRODUCT_IN_CART')\n     {\n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state.splice(index, 1);\n               \n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n\n        }\n     if(action.type=='UPDATE_PRODUCT_IN_CART')\n     {\n            index = findProductInCart(state, product);\n            if(index !== -1){\n                state[index].quantity = quantity;\n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n        }      \n     else return [...state];\n    \n}\n\nvar findProductInCart = (cart, product) => {//tim product da co trong cart hay chua\n    var index = -1;\n    if (cart.length > 0) {\n        for (var i = 0; i < cart.length; i++) {\n            if (cart[i].product.id === product.id) {\n                index = i;\n                break;\n            }\n        }\n    }\n    return index;\n}\n"]},"metadata":{},"sourceType":"module"}