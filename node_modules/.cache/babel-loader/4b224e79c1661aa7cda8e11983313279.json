{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//Login\nimport axios from 'axios';\nconst SET_LOGIN = 'SET_LOGIN';\nexport function login(email, password) {\n  //reducer thuc hien action login xu ly du lieu lay qua\n  console.log(\"abcdds\");\n  return async dispatch => {\n    axios({\n      method: 'get',\n      url: 'https://localhost:5001/api/Token',\n      data: {\n        email,\n        password\n      },\n      headers: 'application/json'\n    }).then(response => {\n      console.log(response);\n      if (response.status == \"400\") dispatch({\n        type: SET_LOGIN,\n        payload: false\n      });else {\n        localStorage.setItem(\"token\", response);\n        dispatch({\n          type: SET_LOGIN,\n          payload: true\n        });\n      }\n    }).catch(err => window.alert('Sai MK'));\n  };\n}\nexport function logout() {\n  //reducer thuc hien action login xu ly du lieu lay qua\n  return dispatch => {\n    localStorage.clear();\n    dispatch({\n      type: SET_LOGIN,\n      payload: false\n    });\n  };\n}\nvar a = false;\nvar data = localStorage.getItem('token');\nif (data != null) a = true;\nvar login_state = {\n  isLoginSuccess: a\n};\nexport default function login_reducer(state = login_state, action) {\n  if (action.type == 'SET_LOGIN') {\n    let newState = _objectSpread({}, state);\n\n    newState.isLoginSuccess = action.payload;\n    return newState;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/login_reducer.js"],"names":["axios","SET_LOGIN","login","email","password","console","log","dispatch","method","url","data","headers","then","response","status","type","payload","localStorage","setItem","catch","err","window","alert","logout","clear","a","getItem","login_state","isLoginSuccess","login_reducer","state","action","newState"],"mappings":";;;;;;AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,SAAS,GAAG,WAAlB;AACA,OAAO,SAASC,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgC;AACrC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,SAAO,MAAMC,QAAN,IAAkB;AAEvBP,IAAAA,KAAK,CAAC;AACJQ,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAE,kCAFD;AAGJC,MAAAA,IAAI,EAAE;AAAEP,QAAAA,KAAF;AAAQC,QAAAA;AAAR,OAHF;AAIJO,MAAAA,OAAO,EAAC;AAJJ,KAAD,CAAL,CAKGC,IALH,CAKQC,QAAQ,IAAI;AACpBR,MAAAA,OAAO,CAACC,GAAR,CAAYO,QAAZ;AACI,UAAGA,QAAQ,CAACC,MAAT,IAAiB,KAApB,EAA2BP,QAAQ,CAAE;AAACQ,QAAAA,IAAI,EAACd,SAAN;AAAiBe,QAAAA,OAAO,EAAC;AAAzB,OAAF,CAAR,CAA3B,KACK;AAAEC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BL,QAA7B;AACLN,QAAAA,QAAQ,CAAE;AAACQ,UAAAA,IAAI,EAACd,SAAN;AAAiBe,UAAAA,OAAO,EAAC;AAAzB,SAAF,CAAR;AACL;AAEA,KAZD,EAYGG,KAZH,CAYSC,GAAG,IAAIC,MAAM,CAACC,KAAP,CAAa,QAAb,CAZhB;AAaH,GAfC;AAiBD;AACD,OAAO,SAASC,MAAT,GAAkB;AAAE;AACzB,SAAOhB,QAAQ,IAAI;AACjBU,IAAAA,YAAY,CAACO,KAAb;AACAjB,IAAAA,QAAQ,CAAE;AAACQ,MAAAA,IAAI,EAACd,SAAN;AAAiBe,MAAAA,OAAO,EAAC;AAAzB,KAAF,CAAR;AACH,GAHC;AAID;AAED,IAAIS,CAAC,GAAC,KAAN;AACC,IAAIf,IAAI,GAACO,YAAY,CAACS,OAAb,CAAqB,OAArB,CAAT;AACA,IAAGhB,IAAI,IAAE,IAAT,EAAee,CAAC,GAAC,IAAF;AAChB,IAAIE,WAAW,GAAC;AAEdC,EAAAA,cAAc,EAACH;AAFD,CAAhB;AAIA,eAAe,SAASI,aAAT,CAAuBC,KAAK,GAAEH,WAA9B,EAA2CI,MAA3C,EAAmD;AAEhE,MAAGA,MAAM,CAAChB,IAAP,IAAa,WAAhB,EACA;AAAG,QAAIiB,QAAQ,qBAAKF,KAAL,CAAZ;;AACAE,IAAAA,QAAQ,CAACJ,cAAT,GAAwBG,MAAM,CAACf,OAA/B;AACA,WAAOgB,QAAP;AACD;;AACD,SAAOF,KAAP;AAEF","sourcesContent":["//Login\r\nimport axios from 'axios';\r\nconst SET_LOGIN = 'SET_LOGIN';\r\nexport function login(email, password) { \r\n  //reducer thuc hien action login xu ly du lieu lay qua\r\n  console.log(\"abcdds\");\r\n  return async dispatch => {\r\n   \r\n    axios({\r\n      method: 'get',\r\n      url: 'https://localhost:5001/api/Token',\r\n      data: { email,password },\r\n      headers:'application/json',\r\n    }).then(response => {\r\n    console.log(response);\r\n        if(response.status==\"400\") dispatch ({type:SET_LOGIN, payload:false});\r\n        else { localStorage.setItem(\"token\",response);\r\n          dispatch ({type:SET_LOGIN, payload:true});\r\n    }\r\n     \r\n    }).catch(err => window.alert('Sai MK'));\r\n}\r\n  \r\n}\r\nexport function logout() { //reducer thuc hien action login xu ly du lieu lay qua\r\n  return dispatch => {\r\n    localStorage.clear();\r\n    dispatch ({type:SET_LOGIN, payload:false});\r\n}\r\n}\r\n\r\nvar a=false;\r\n var data=localStorage.getItem('token') \r\n if(data!=null) a=true;\r\nvar login_state={\r\n \r\n  isLoginSuccess:a,\r\n}\r\nexport default function login_reducer(state =login_state, action) {\r\n  \r\n  if(action.type=='SET_LOGIN')\r\n  {  let newState={...state};\r\n     newState.isLoginSuccess=action.payload\r\n     return newState;\r\n   }\r\n   return state;\r\n  \r\n}"]},"metadata":{},"sourceType":"module"}