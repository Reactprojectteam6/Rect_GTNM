{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst GET_USER = 'GET_USER';\nconst UPDATE_USER = 'UPDATE_USER';\nconst DELETE_USER = 'DELETE_USER';\nconst GET_ALL_USER = 'GET_ALL_USER';\nconst GET_USER_BY_NAME = 'GET_USER_BY_NAME';\nconst GET_ALL_SHOP = 'GET_ALL_SHOP';\nconst GET_SHOP_BY_NAME = 'GET_SHOP_BY_NAME';\nconst GET_BILL = 'GET_BILL';\nexport function getUser(user) {\n  return dispatch => {\n    dispatch({\n      type: GET_USER,\n      payload: user\n    });\n  };\n}\nexport function updateUser(id, user_name, email, phone, address, password, newpassword, role) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(Response => {\n      if (Response.status == \"200\") {\n        if (Response.data.password == password) {\n          if (password == newpassword) {\n            var user = {\n              id: id,\n              user_name: user_name,\n              password: newpassword,\n              email: email,\n              phone: phone,\n              address: address,\n              role: role\n            };\n            axios({\n              method: 'put',\n              url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n              data: user,\n              headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json',\n                'Authorization': 'Bearer ' + localStorage.getItem('token')\n              }\n            }).then(res => {\n              if (res.status == \"200\") {\n                alert(\"cap nhat thanh cong!!\");\n                dispatch({\n                  type: UPDATE_USER,\n                  payload: user\n                });\n              }\n            });\n          } else {\n            alert(\"Password va Password confirm khong khop,vui long nhap lai\");\n          }\n        } else {\n          alert(\"password cu khong chinh xac!!\");\n        }\n      }\n    });\n  };\n}\nexport function deleteUser(id) {\n  console.log(\"user sau khi xoa\");\n  return dispatch => {\n    API(id, data => {\n      console.log(data);\n      dispatch({\n        type: DELETE_USER,\n        payload: data\n      });\n    });\n  };\n}\n\nasync function API(id, callback) {\n  await axios({\n    method: 'delete',\n    url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      'Authorization': 'Bearer ' + localStorage.getItem('token')\n    }\n  }).then(res => {\n    if (res.status == \"200\") alert(\"xoa user thanh cong!!\");\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/User\",\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") callback(res.data);\n    });\n  });\n}\n\nexport function getAllUser() {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/User\",\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") dispatch({\n        type: GET_ALL_USER,\n        payload: res.data\n      });\n    });\n  };\n}\nexport function getUserByName(key) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/User/name=\".concat(key),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") dispatch({\n        type: GET_USER_BY_NAME,\n        payload: res.data\n      });\n    });\n  };\n}\nexport function getAllShop() {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Shop\",\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") dispatch({\n        type: GET_ALL_SHOP,\n        payload: res.data\n      });\n    });\n  };\n} //get shop by name\n\nexport function getShopByName(key) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Shop/name=\".concat(key),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.status == \"200\") dispatch({\n        type: GET_SHOP_BY_NAME,\n        payload: res.data\n      });\n    });\n  };\n} //get bill\n\nexport function getBill(item, id) {\n  return dispatch => {\n    var data = item.check_Paid_Shops;\n    const check_Paid_Shops = data.filter(data => item.data.id == id);\n    var Bill = {\n      name: item.name,\n      user_name: item.user_name,\n      email: item.email,\n      phone: item.phone,\n      check_Paid_Shops: check_Paid_Shops\n    };\n    dispatch({\n      type: GET_BILL,\n      payload: Bill\n    });\n  };\n}\nvar dt = JSON.parse(localStorage.getItem('User'));\nvar dt1 = JSON.parse(localStorage.getItem('Bill'));\nvar initialState = {\n  user: dt ? dt : null,\n  users: [],\n  shops: [],\n  bill: dt1 ? dt1 : null\n};\nexport default function admin_reducer(state = initialState, action) {\n  if (action.type == 'GET_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.user = action.payload;\n    localStorage.setItem('User', JSON.stringify(newState.user));\n    return newState;\n  }\n\n  if (action.type == 'UPDATE_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.user = action.payload;\n    localStorage.setItem('User', JSON.stringify(newState.user));\n    return newState;\n  }\n\n  if (action.type == 'GET_ALL_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.users = action.payload;\n    return newState;\n  }\n\n  if (action.type == 'DELETE_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.users = action.payload;\n    return newState;\n  }\n\n  if (action.type == 'GET_USER_BY_NAME') {\n    let newState = _objectSpread({}, state);\n\n    newState.users = action.payload;\n    return newState;\n  }\n\n  if (action.type == 'GET_ALL_SHOP') {\n    let newState = _objectSpread({}, state);\n\n    newState.shops = action.payload;\n    return newState;\n  }\n\n  if (action.type == 'GET_SHOP_BY_NAME') {\n    let newState = _objectSpread({}, state);\n\n    newState.shops = action.payload;\n    return newState;\n  }\n\n  if (action.type == 'GET_BILL') {\n    let newState = _objectSpread({}, state);\n\n    newState.bill = action.payload;\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/admin_reducer.js"],"names":["axios","GET_USER","UPDATE_USER","DELETE_USER","GET_ALL_USER","GET_USER_BY_NAME","GET_ALL_SHOP","GET_SHOP_BY_NAME","GET_BILL","getUser","user","dispatch","type","payload","updateUser","id","user_name","email","phone","address","password","newpassword","role","method","url","headers","Accept","localStorage","getItem","then","Response","status","data","res","alert","deleteUser","console","log","API","callback","getAllUser","getUserByName","key","getAllShop","getShopByName","getBill","item","check_Paid_Shops","filter","Bill","name","dt","JSON","parse","dt1","initialState","users","shops","bill","admin_reducer","state","action","newState","setItem","stringify"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst GET_USER='GET_USER';\r\nconst UPDATE_USER='UPDATE_USER';\r\nconst DELETE_USER='DELETE_USER';\r\nconst GET_ALL_USER='GET_ALL_USER';\r\nconst GET_USER_BY_NAME='GET_USER_BY_NAME';\r\nconst GET_ALL_SHOP='GET_ALL_SHOP';\r\nconst GET_SHOP_BY_NAME='GET_SHOP_BY_NAME';\r\nconst GET_BILL='GET_BILL';\r\nexport function getUser(user)\r\n{\r\nreturn  dispatch=>{\r\ndispatch({type:GET_USER,payload:user});\r\n\r\n}\r\n}\r\nexport function  updateUser(id,user_name,email,phone,address,password,newpassword,role)\r\n{  \r\n    return dispatch => {axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/User/${id}`,\r\n      headers:{\r\n       'Content-Type': 'application/json',\r\n       Accept: 'application/json',\r\n       'Authorization':'Bearer '+localStorage.getItem('token')\r\n     }\r\n  \r\n     }).then(Response=>{\r\n      if(Response.status==\"200\") {\r\n      if(Response.data.password==password) \r\n       { if(password==newpassword)\r\n         {  var user={\r\n          id:id,\r\n          user_name:user_name,\r\n          password:newpassword,\r\n          email :email,\r\n          phone:phone,\r\n          address:address,\r\n          role:role\r\n         }\r\n          axios({\r\n              method:'put',\r\n              url: `https://127.0.0.1:5001/api/User/${id}`,\r\n              data:user,\r\n               headers:{\r\n                'Content-Type': 'application/json',\r\n                Accept: 'application/json',\r\n                'Authorization':'Bearer '+localStorage.getItem('token')\r\n              }\r\n             }).then(res=>{\r\n              if(res.status==\"200\")\r\n                 {alert(\"cap nhat thanh cong!!\")\r\n                   dispatch({type:UPDATE_USER,payload:user});\r\n                  \r\n                 }\r\n  \r\n                  \r\n             })   \r\n         }   \r\n         else {alert(\"Password va Password confirm khong khop,vui long nhap lai\");}\r\n  \r\n       }\r\n       else {alert(\"password cu khong chinh xac!!\");}\r\n  \r\n      }\r\n  \r\n  \r\n     })\r\n       \r\n      }\r\n}\r\nexport function deleteUser(id)\r\n{ console.log(\"user sau khi xoa\");\r\n  return dispatch => {\r\n    API(id,data=> {\r\n      console.log(data);\r\n      dispatch({type:DELETE_USER,payload:data})\r\n    });\r\n  }\r\n}\r\n\r\nasync function API(id,callback)\r\n{ \r\n  await axios({\r\n    method:'delete',\r\n    url: `https://127.0.0.1:5001/api/User/${id}`,\r\n    headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n   }\r\n\r\n  }).then(res=>{\r\n   if(res.status==\"200\") alert(\"xoa user thanh cong!!\");\r\n\r\n   axios({\r\n    method:'get',\r\n    url: `https://127.0.0.1:5001/api/User`,\r\n     headers:{\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      'Authorization':'Bearer '+localStorage.getItem('token')\r\n    }\r\n   }).then(res=>{\r\n    if(res.status==\"200\") callback(res.data);\r\n   }) \r\n\r\n  })\r\n}\r\nexport function getAllUser()\r\n {\r\n   return dispatch=>{\r\n    axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/User`,\r\n       headers:{\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Authorization':'Bearer '+localStorage.getItem('token')\r\n      }\r\n     }).then(res=>{\r\n      if(res.status==\"200\") dispatch({type:GET_ALL_USER,payload:res.data});\r\n     }) \r\n   }\r\n } \r\n\r\nexport function getUserByName(key)\r\n{return dispatch=>{\r\n  axios({\r\n    method:'get',\r\n    url: `https://127.0.0.1:5001/api/User/name=${key}`,\r\n     headers:{\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      'Authorization':'Bearer '+localStorage.getItem('token')\r\n    }\r\n   }).then(res=>{\r\n    if(res.status==\"200\") dispatch({type:GET_USER_BY_NAME,payload:res.data});\r\n   }) \r\n }\r\n\r\n}\r\nexport function getAllShop()\r\n{return dispatch=>{\r\n  axios({\r\n    method:'get',\r\n    url: `https://127.0.0.1:5001/api/Shop`,\r\n     headers:{\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      'Authorization':'Bearer '+localStorage.getItem('token')\r\n    }\r\n   }).then(res=>{\r\n    if(res.status==\"200\") dispatch({type:GET_ALL_SHOP,payload:res.data});\r\n   }) \r\n }\r\n\r\n}\r\n \r\n\r\n//get shop by name\r\n\r\nexport function getShopByName(key)\r\n{return dispatch=>{\r\n  axios({\r\n    method:'get',\r\n    url: `https://127.0.0.1:5001/api/Shop/name=${key}`,\r\n     headers:{\r\n      'Content-Type': 'application/json',\r\n      Accept: 'application/json',\r\n      'Authorization':'Bearer '+localStorage.getItem('token')\r\n    }\r\n   }).then(res=>{\r\n    if(res.status==\"200\") dispatch({type:GET_SHOP_BY_NAME,payload:res.data});\r\n   }) \r\n }\r\n}\r\n //get bill\r\n \r\nexport function getBill(item,id)\r\n{\r\n  return dispatch=>{\r\n    var data=item.check_Paid_Shops;\r\n    const check_Paid_Shops=data.filter(data =>item.data.id==id);\r\n   var Bill={\r\n\r\n    name:item.name,\r\n    user_name:item.user_name,\r\n    email:item.email,\r\n    phone:item.phone,\r\n    check_Paid_Shops:check_Paid_Shops\r\n   }\r\n \r\n \r\n  dispatch({type:GET_BILL,payload:Bill});\r\n }\r\n}\r\nvar dt=JSON.parse(localStorage.getItem('User'));\r\nvar dt1=JSON.parse(localStorage.getItem('Bill'));\r\nvar initialState={\r\n   user:dt?dt:null,\r\n   users:[],\r\n   shops:[],\r\n   bill:dt1?dt1:null,\r\n  }\r\n  export default function admin_reducer(state =initialState, action) {\r\n    if(action.type=='GET_USER')\r\n    {  \r\n      let newState={...state};\r\n      newState.user=action.payload;\r\n      localStorage.setItem('User',JSON.stringify(newState.user));\r\n      return newState;\r\n    }\r\n    if(action.type=='UPDATE_USER')\r\n    {\r\n      let newState={...state};\r\n      newState.user=action.payload;\r\n      localStorage.setItem('User',JSON.stringify(newState.user));\r\n      return newState;\r\n    }\r\n    if(action.type=='GET_ALL_USER')\r\n    {  let newState={...state};\r\n      newState.users=action.payload;\r\n      return newState;\r\n  \r\n    }\r\n    if(action.type=='DELETE_USER')\r\n    {  let newState={...state};\r\n       newState.users=action.payload;\r\n       return newState;\r\n\r\n    }\r\n    if(action.type=='GET_USER_BY_NAME')\r\n    {  let newState={...state};\r\n       newState.users=action.payload;\r\n       return newState;\r\n\r\n    }\r\n    if(action.type=='GET_ALL_SHOP')\r\n    {  let newState={...state};\r\n       newState.shops=action.payload;\r\n       return newState;\r\n\r\n    }\r\n    if(action.type=='GET_SHOP_BY_NAME')\r\n    {  let newState={...state};\r\n       newState.shops=action.payload;\r\n       return newState;\r\n\r\n    }\r\n    if(action.type=='GET_BILL')\r\n    {  let newState={...state};\r\n       newState.bill=action.payload;\r\n       return newState;\r\n\r\n    }\r\n\r\n    else return state;\r\n  }"]},"metadata":{},"sourceType":"module"}