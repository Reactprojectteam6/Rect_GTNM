{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst SET_ORDER = 'SET_ORDER';\nconst GET_ORDER_HISTORY_OF_USER = 'GET_ORDER_HISTORY_OF_USER';\nexport function setOrder(order, user_id, state, address, email, phone, total_payment, payment_method, fullname) {\n  return dispatch => {\n    callApi(order, user_id, state, address, email, phone, total_payment, payment_method, fullname, error => {\n      if (!error) {\n        dispatch(setSuccess(true)); //tra ve cho form\n      } else {\n        dispatch(setSuccess(false)); //tra ve cho form\n      }\n    });\n  };\n}\n\nfunction setSuccess(isSuccess) {\n  return {\n    type: SET_ORDER,\n    isSuccess\n  };\n}\n\nfunction callApi(order, user_id, state, address, email, phone, total_payment, payment_method, fullname, callback) {\n  console.log(order);\n  console.log(user_id);\n  console.log(state);\n  console.log(address);\n  console.log(email);\n  console.log(phone);\n  console.log(total_payment);\n  console.log(payment_method);\n  console.log(fullname);\n  var count = 0;\n\n  if (order.length > 0) {\n    for (var i = 0; i < order.length; i++) {\n      if (order[i].quantity <= order[i].product.quantity) {\n        count++;\n      }\n    }\n  }\n\n  if (count != 0) {\n    axios({\n      method: 'post',\n      url: \"https://127.0.0.1:5001/api/Receiver\",\n      data: {\n        address: address,\n        email: email,\n        fullname: fullname,\n        phone: phone\n      },\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.status == \"200\") {\n        //alert(\"tao receiver thanh cong\");\n        axios({\n          method: 'post',\n          url: \"https://127.0.0.1:5001/api/Order\",\n          data: {\n            payment_id: payment_method,\n            receiver_id: response.data.id,\n            user_id: user_id,\n            status: Number(state),\n            total: Number(total_payment),\n            date_create: new Date(Date.now())\n          },\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(response1 => {\n          if (response1.status == \"200\") {\n            console.log(response1); //alert(\"Tao order thanh cong\")\n\n            for (var i = 0; i < order.length; i++) {\n              if (order[i].quantity <= order[i].product.quantity) {\n                axios({\n                  method: 'post',\n                  url: \"https://127.0.0.1:5001/api/OrderDetail\",\n                  data: {\n                    price: Number(order[i].product.price),\n                    product_id: order[i].product.id,\n                    quantity: Number(order[i].quantity),\n                    order_id: response1.data.id\n                  },\n                  headers: {\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json',\n                    'Authorization': 'Bearer ' + localStorage.getItem('token')\n                  }\n                }).then(response2 => {\n                  if (response2.status == \"200\") {//alert(\"order detail thanh cong\")\n                  }\n                });\n                var product = {\n                  id: order[i].product.id,\n                  product_name: order[i].product.product_name,\n                  description: order[i].product.description,\n                  cat_id: order[i].product.cat_id,\n                  price: Number(order[i].product.price),\n                  quantity: order[i].product.quantity - order[i].quantity,\n                  shop_id: order[i].product.shop_id,\n                  image: order[i].product.image\n                };\n                var id = order[i].product.id;\n                axios({\n                  method: 'put',\n                  url: \"https://127.0.0.1:5001/api/Product/\".concat(id),\n                  data: product,\n                  headers: {\n                    'Content-Type': 'application/json',\n                    Accept: 'application/json',\n                    'Authorization': 'Bearer ' + localStorage.getItem('token')\n                  }\n                }).then(res => {\n                  if (res.status == \"200\") alert(\"order thanh cong\");\n                });\n              }\n            }\n          }\n        });\n      }\n    });\n  }\n}\n\nexport function getOrderOfUser() {\n  return dispatch => {\n    callApi1(data => {\n      if (!data) {\n        dispatch({\n          type: GET_ORDER_HISTORY_OF_USER,\n          payload: data\n        });\n      }\n    });\n  };\n}\n\nfunction callApi1(id, callback) {\n  axios({\n    method: 'get',\n    url: \"https://127.0.0.1:5001/api/Order/user/\".concat(JSoN.parse(localStorage.getItem('currentUser')).id),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      'Authorization': 'Bearer ' + localStorage.getItem('token')\n    }\n  }).then(response => {\n    if (response.status == \"200\") {\n      return callback(response.data);\n    } else callback(null);\n  }); //alert(\"tao rece\n}\n\nvar order_user = JSON.parse(localStorage.getItem('orderHistoryOfUser'));\nvar order_state = {\n  isSuccess: false,\n  ordersUser: order_user ? order_user : []\n};\nexport default function order_reducer(state = order_state, action) {\n  if (action.type == 'SET_ORDER') {\n    let newState = _objectSpread({}, state);\n\n    newState.isSuccess = action.isSuccess;\n    if (newState.isSuccess == true) alert(\"order thanh cong,vui long cho nhan hang\");\n    return newState;\n  }\n\n  if (action.type == 'GET_ORDER_HISTORY_OF_USER') {\n    let newState = _objectSpread({}, state);\n\n    newState.ordersUser = action.payload;\n    return newState;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/order_reducer.js"],"names":["axios","SET_ORDER","GET_ORDER_HISTORY_OF_USER","setOrder","order","user_id","state","address","email","phone","total_payment","payment_method","fullname","dispatch","callApi","error","setSuccess","isSuccess","type","callback","console","log","count","length","i","quantity","product","method","url","data","headers","Accept","localStorage","getItem","then","response","status","payment_id","receiver_id","id","Number","total","date_create","Date","now","response1","price","product_id","order_id","response2","product_name","description","cat_id","shop_id","image","res","alert","getOrderOfUser","callApi1","payload","JSoN","parse","order_user","JSON","order_state","ordersUser","order_reducer","action","newState"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst SET_ORDER='SET_ORDER';\r\nconst GET_ORDER_HISTORY_OF_USER='GET_ORDER_HISTORY_OF_USER';\r\nexport function   setOrder(order,user_id,state,address,email,phone,total_payment,payment_method,fullname)\r\n{ return dispatch => {\r\n    callApi(order,user_id,state,address,email,phone,total_payment,payment_method,fullname,error=> {\r\n      if (!error) {\r\n        dispatch(setSuccess(true));//tra ve cho form\r\n      } else {\r\n        dispatch(setSuccess(false));//tra ve cho form\r\n      }\r\n    });\r\n  }\r\n}\r\n  function setSuccess(isSuccess) {\r\n    return {\r\n      type: SET_ORDER,\r\n      isSuccess\r\n    };\r\n  }\r\n  \r\nfunction callApi(order,user_id,state,address,email,phone,total_payment,payment_method,fullname,callback) {\r\n    console.log(order);\r\n    console.log(user_id);\r\n    console.log(state);\r\n    console.log(address);\r\n    console.log(email);\r\n    console.log(phone);\r\n    console.log(total_payment);\r\n    console.log(payment_method);\r\n    console.log(fullname);\r\n  var count=0;\r\n           if (order.length > 0 ) {\r\n             for (var i = 0; i < order.length; i++) {\r\n               if(order[i].quantity<=order[i].product.quantity)\r\n                { count++;\r\n                \r\n                 }\r\n                }\r\n             }        \r\n               \r\n    if(count!=0)\r\n    { \r\n        \r\n         axios(\r\n    \r\n        {  method:'post',\r\n           url: `https://127.0.0.1:5001/api/Receiver`,\r\n           data:{\r\n            address :address,\r\n            email :email,\r\n            fullname:fullname,\r\n            phone:phone\r\n           },\r\n           headers:{\r\n            'Content-Type': 'application/json',\r\n            Accept: 'application/json',\r\n            'Authorization':'Bearer '+localStorage.getItem('token')\r\n          }\r\n            \r\n        }\r\n      ).then(response=>{\r\n        if(response.status==\"200\")\r\n        {\r\n         //alert(\"tao receiver thanh cong\");\r\n          axios(\r\n            {  \r\n           method:'post',\r\n           url: `https://127.0.0.1:5001/api/Order`,\r\n           data:{\r\n            payment_id:payment_method,\r\n            receiver_id :response.data.id,\r\n            user_id:user_id,\r\n            status:Number(state),\r\n            total:Number(total_payment),\r\n            date_create:new Date(Date.now()),\r\n           },\r\n           headers:{\r\n            'Content-Type': 'application/json',\r\n            Accept: 'application/json',\r\n            'Authorization':'Bearer '+localStorage.getItem('token')\r\n          }\r\n\r\n            }\r\n          ).then(response1=>{\r\n            if(response1.status==\"200\")\r\n            { console.log(response1);\r\n             //alert(\"Tao order thanh cong\")\r\n\r\n             for(var i=0;i<order.length;i++)\r\n             { if(order[i].quantity<=order[i].product.quantity)\r\n                 { \r\n                   axios({\r\n                    method:'post',\r\n                    url: `https://127.0.0.1:5001/api/OrderDetail`,\r\n                    data:{\r\n                      price:Number(order[i].product.price),\r\n                      product_id:order[i].product.id,\r\n                      quantity:Number(order[i].quantity),\r\n                      order_id:response1.data.id\r\n\r\n                     },\r\n                     headers:{\r\n                      'Content-Type': 'application/json',\r\n                      Accept: 'application/json',\r\n                      'Authorization':'Bearer '+localStorage.getItem('token')\r\n                    }\r\n\r\n                   }).then(response2=>{\r\n                     if(response2.status==\"200\")\r\n                    {  \r\n                           //alert(\"order detail thanh cong\")\r\n                   }\r\n                      \r\n                   })\r\n                   var product={\r\n\r\n                    id:order[i].product.id,\r\n                    product_name:order[i].product.product_name,\r\n                    description:order[i].product.description,\r\n                    cat_id:order[i].product.cat_id,\r\n                    price:Number(order[i].product.price),\r\n                    quantity:order[i].product.quantity-order[i].quantity,\r\n                    shop_id:order[i].product.shop_id,\r\n                    image:order[i].product.image\r\n                  }\r\n                \r\n                  var id=order[i].product.id;\r\n                 axios({\r\n                  method:'put',\r\n                  url: `https://127.0.0.1:5001/api/Product/${id}`,\r\n                  data:product,\r\n                   headers:{\r\n                    'Content-Type': 'application/json',\r\n                    Accept: 'application/json',\r\n                    'Authorization':'Bearer '+localStorage.getItem('token')\r\n                  }\r\n                 }).then(res=>{\r\n                  if(res.status==\"200\") alert(\"order thanh cong\");\r\n                 })\r\n\r\n                 }\r\n\r\n             }\r\n            }\r\n\r\n          })\r\n        }\r\n         \r\n\r\n      })    \r\n                 \r\n\r\n    }\r\n    \r\n \r\n \r\n }\r\n \r\n export function getOrderOfUser()\r\n { \r\n  return dispatch => {\r\n    callApi1(data=> {\r\n      if (!data) {\r\n        dispatch({type:GET_ORDER_HISTORY_OF_USER,payload:data});\r\n      } \r\n    });\r\n  }\r\n\r\n }\r\n function callApi1(id,callback)\r\n {  axios(\r\n    {  method:'get',\r\n       url: `https://127.0.0.1:5001/api/Order/user/${JSoN.parse(localStorage.getItem('currentUser')).id}`,\r\n       headers:{\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Authorization':'Bearer '+localStorage.getItem('token')\r\n      }\r\n        \r\n    }\r\n  ).then(response=>{\r\n    if(response.status==\"200\")\r\n    {  return callback(response.data);\r\n    }\r\n    else callback(null);\r\n  })\r\n     //alert(\"tao rece\r\n }\r\nvar order_user=JSON.parse(localStorage.getItem('orderHistoryOfUser'));\r\nvar order_state={\r\n  isSuccess:false,\r\n  ordersUser:order_user?order_user:[]\r\n}\r\nexport default function order_reducer(state =order_state, action) {\r\n  if(action.type=='SET_ORDER')\r\n  {\r\n    let newState={...state};\r\n    newState.isSuccess=action.isSuccess;\r\n    if(newState.isSuccess==true) alert(\"order thanh cong,vui long cho nhan hang\");\r\n    return newState;\r\n  }\r\n  if(action.type=='GET_ORDER_HISTORY_OF_USER')\r\n  {let newState={...state};\r\n  newState.ordersUser=action.payload;\r\n  return newState;\r\n  }\r\n      return state;\r\n  \r\n}"]},"metadata":{},"sourceType":"module"}