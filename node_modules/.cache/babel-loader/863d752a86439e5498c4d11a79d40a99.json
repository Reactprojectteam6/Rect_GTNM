{"ast":null,"code":"const ADD_TO_CART = 'ADD_TO_CART';\nconst DELETE_PRODUCT_IN_CART = 'DELETE_PRODUCT_IN_CART';\nconst UPDATE_PRODUCT_IN_CART = 'UPDATE_PRODUCT_IN_CART';\nconst DELETE_ALL_PRODUCT_IN_CART = 'DELETE_ALL_PRODUCT_IN_CART';\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\nexport function actAddToCart(product, quantity, color) {\n  return {\n    type: ADD_TO_CART,\n    product,\n    quantity\n  };\n}\nexport function actDeleteProductInCart(product) {\n  return {\n    type: DELETE_PRODUCT_IN_CART,\n    product\n  };\n}\nexport function actUpdateProductInCart(product, quantity) {\n  return {\n    type: UPDATE_PRODUCT_IN_CART,\n    product,\n    quantity\n  };\n}\nexport function deleteAllProductInCart() {\n  return {\n    type: DELETE_ALL_PRODUCT_IN_CART\n  };\n}\nexport default function cart_reducer(state = initialState, action) {\n  var product = action.product,\n      quantity = action.quantity,\n      color = action.color;\n  var index = -1; // Không tìm thấy => index = -1\n\n  if (action.type == 'ADD_TO_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state[index].quantity += parseInt(quantity);\n    } else {\n      state.push({\n        product,\n        quantity\n      });\n      alert(\"add product into cart successfully\");\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  }\n\n  if (action.type == 'DELETE_PRODUCT_IN_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state.splice(index, 1);\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  }\n\n  if (action.type == 'UPDATE_PRODUCT_IN_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state[index].quantity = quantity;\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  }\n\n  if (action.type == 'DELETE_ALL_PRODUCT_IN_CART') {\n    for (var i = 0; i < state.length; i++) {\n      state.splice(i, 1);\n    }\n\n    state.splice(state.length + 1, 1);\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  } else return [...state];\n}\n\nvar findProductInCart = (cart, product) => {\n  //tim product da co trong cart hay chua\n  var index = -1;\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/cart_reducer.js"],"names":["ADD_TO_CART","DELETE_PRODUCT_IN_CART","UPDATE_PRODUCT_IN_CART","DELETE_ALL_PRODUCT_IN_CART","data","JSON","parse","localStorage","getItem","initialState","actAddToCart","product","quantity","color","type","actDeleteProductInCart","actUpdateProductInCart","deleteAllProductInCart","cart_reducer","state","action","index","findProductInCart","parseInt","push","alert","setItem","stringify","splice","i","length","cart","id"],"mappings":"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","sourcesContent":["const ADD_TO_CART = 'ADD_TO_CART';\nconst DELETE_PRODUCT_IN_CART = 'DELETE_PRODUCT_IN_CART';\nconst UPDATE_PRODUCT_IN_CART='UPDATE_PRODUCT_IN_CART';\nconst DELETE_ALL_PRODUCT_IN_CART='DELETE_ALL_PRODUCT_IN_CART';\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\n\nexport function  actAddToCart(product, quantity,color) {\n    \n    \n    return {\n        type:ADD_TO_CART,\n        product,\n        quantity,\n    }\n}\nexport function  actDeleteProductInCart(product){\n    return {\n        type :DELETE_PRODUCT_IN_CART,\n       product    }\n}\nexport function  actUpdateProductInCart(product, quantity ){\n    return {\n        type :UPDATE_PRODUCT_IN_CART,\n       product,\n       quantity\n    }\n }\n export function deleteAllProductInCart()\n {\n    return {\n        type :DELETE_ALL_PRODUCT_IN_CART,\n    }\n }\nexport default function cart_reducer(state =initialState, action)  {\n    var { product, quantity,color } = action;\n    var index = -1; // Không tìm thấy => index = -1\n    if(action.type=='ADD_TO_CART')\n    {        \n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state[index].quantity += parseInt(quantity);\n            } else {\n                state.push({\n                    product,\n                    quantity,\n                    \n                });\n                alert(\"add product into cart successfully\");\n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n\n        }       \n    if(action.type=='DELETE_PRODUCT_IN_CART')\n     {\n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state.splice(index, 1);\n               \n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n\n        }\n     if(action.type=='UPDATE_PRODUCT_IN_CART')\n     {\n            index = findProductInCart(state, product);\n            if(index !== -1){\n                state[index].quantity = quantity;\n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n        }      \n     if(action.type=='DELETE_ALL_PRODUCT_IN_CART')\n     {\n        for (var i = 0; i < state.length; i++) {\n          \n            state.splice(i, 1);\n        }\n        state.splice(state.length+1,1);\n        localStorage.setItem('CART', JSON.stringify(state));\n        return [...state];\n\n     }   \n\n\n\n     else return [...state];\n    \n}\n\nvar findProductInCart = (cart, product) => {//tim product da co trong cart hay chua\n    var index = -1;\n    if (cart.length > 0) {\n        for (var i = 0; i < cart.length; i++) {\n            if (cart[i].product.id === product.id) {\n                index = i;\n                break;\n            }\n        }\n    }\n    return index;\n}\n"]},"metadata":{},"sourceType":"module"}