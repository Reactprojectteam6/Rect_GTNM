{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst PAYMENT_BY_PAYPAL = 'PAYMENT_BY_PAYPAL';\n\nfunction check(a, b) {\n  for (let i = 0; i < b.length; i++) {\n    if (a == b[i]) return true;\n  }\n\n  return false;\n}\n\nexport function paymentByPaypal(cart) {\n  console.log(\"do cho dien\");\n  console.log(cart);\n  return dispatch => {\n    API(cart, data => {\n      console.log(\"data\");\n      console.log(data);\n      dispatch({\n        type: PAYMENT_BY_PAYPAL,\n        payload: data\n      }); //tra ve cho form\n    });\n  };\n}\n\nasync function API(cart, callback) {\n  console.log(\"ahiii\");\n  let list_shop_id = [];\n  let list_order = [];\n  list_shop_id[0] = cart[0].product.shop_id;\n\n  for (let i = 1; i < cart.length; i++) {\n    if (check(cart[i].product.shop_id, list_shop_id) == false) list_shop_id.push(cart[i].product.shop_id);\n  }\n\n  for (var i = 0; i < list_shop_id.length; i++) {\n    console.log(list_shop_id[i]);\n    let sum = 0; //tinh tong tien cua tung shop\n\n    let list_product = []; //list san pham mua cua tung shop\n\n    let paypal = null;\n    let order;\n\n    for (let j = 0; j < cart.length; j++) {\n      if (cart[j].product.shop_id == list_shop_id[i]) {\n        list_product.push(cart[j]);\n      }\n    }\n\n    for (let k = 0; k < list_product.length; k++) sum += list_product[k].product.price * list_product[k].quantity;\n\n    await axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Shop/Paypal/\".concat(list_shop_id[i]),\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(response => {\n      if (response.status == \"200\") {\n        paypal = response.data;\n        order = {\n          list_product: list_product,\n          sum: sum,\n          paypal: paypal\n        };\n        list_order.push(order);\n      }\n    });\n  }\n\n  console.log(list_order);\n  if (list_order.length > 0) callback(list_order);\n}\n\nvar initialState = {\n  paypal: []\n};\nexport default function paypal_reducer(state = initialState, action) {\n  if (action.type == 'PAYMENT_BY_PAYPAL') {\n    let newState = _objectSpread({}, state);\n\n    newState.paypal = action.payload;\n    console.log(newState.paypal);\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/paypal_reducer.js"],"names":["axios","PAYMENT_BY_PAYPAL","check","a","b","i","length","paymentByPaypal","cart","console","log","dispatch","API","data","type","payload","callback","list_shop_id","list_order","product","shop_id","push","sum","list_product","paypal","order","j","k","price","quantity","method","url","headers","Accept","localStorage","getItem","then","response","status","initialState","paypal_reducer","state","action","newState"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst PAYMENT_BY_PAYPAL='PAYMENT_BY_PAYPAL';\r\nfunction check(a,b)\r\n{  for(let i=0;i<b.length;i++)\r\n   {\r\n     if(a==b[i]) return true;\r\n   }\r\n  return false;\r\n}\r\nexport function paymentByPaypal(cart) {\r\n    console.log(\"do cho dien\");\r\n    console.log(cart);\r\n    return dispatch => {\r\n       API(cart,data => {\r\n           console.log(\"data\");\r\n           console.log(data);\r\n           dispatch({type:PAYMENT_BY_PAYPAL,payload:data});//tra ve cho form\r\n          \r\n      });\r\n    }\r\n  }\r\n\r\nasync function API(cart,callback)\r\n{   console.log(\"ahiii\");\r\n    let list_shop_id=[];\r\n    let list_order=[];\r\n    list_shop_id[0]=cart[0].product.shop_id;\r\n    for (let i = 1; i < cart.length; i++) {\r\n       if(check(cart[i].product.shop_id,list_shop_id)==false) list_shop_id.push(cart[i].product.shop_id);\r\n\r\n     }\r\n     for(var i=0;i<list_shop_id.length;i++)\r\n      { \r\n          console.log(list_shop_id[i])\r\n\r\n         let sum=0;//tinh tong tien cua tung shop\r\n        let list_product=[];//list san pham mua cua tung shop\r\n        let paypal=null;\r\n        let order;\r\n       for(let j=0;j<cart.length;j++)\r\n        {\r\n          if(cart[j].product.shop_id==list_shop_id[i]) \r\n            {  list_product.push(cart[j]);\r\n            }\r\n        }\r\n     \r\n        for(let k=0;k<list_product.length;k++) sum+=list_product[k].product.price*list_product[k].quantity;\r\n         await axios({\r\n            method: 'get',\r\n            url: `https://127.0.0.1:5001/api/Shop/Paypal/${list_shop_id[i]}`,\r\n            headers:{\r\n                'Content-Type': 'application/json',\r\n                Accept: 'application/json',\r\n                'Authorization':'Bearer '+localStorage.getItem('token')\r\n              }\r\n           \r\n          }).then(response => {\r\n            if(response.status==\"200\")\r\n            {paypal=response.data;\r\n               order={\r\n                    list_product:list_product,\r\n                    sum:sum,\r\n                    paypal:paypal\r\n         \r\n                   } \r\n                   list_order.push(order); \r\n            }     \r\n          })\r\n          \r\n        \r\n       \r\n        \r\n        \r\n            \r\n    }\r\n    console.log(list_order);\r\n    if(list_order.length>0) callback(list_order);\r\n\r\n}\r\nvar initialState =\r\n{ paypal:[]\r\n}\r\nexport default function paypal_reducer(state =initialState, action) {\r\n  if(action.type=='PAYMENT_BY_PAYPAL')\r\n  { let newState={...state};\r\n    newState.paypal=action.payload\r\n    console.log(newState.paypal);\r\n    return newState;\r\n  }\r\n\r\n  else return state;\r\n}"]},"metadata":{},"sourceType":"module"}