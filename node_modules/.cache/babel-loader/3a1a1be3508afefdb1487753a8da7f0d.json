{"ast":null,"code":"import axios from \"axios\";\nconst UPDATE_USER = 'UPDATE_USER';\nexport function updateUser(id, user_name, email, phone, adddress, password, newpassword) {\n  return dispatch => {\n    callApi(id, user_name, email, phone, adddress, password, newpassword, error => {\n      if (!error) {\n        dispatch(setSuccess(true)); //tra ve cho form\n      } else {\n        dispatch(setSuccess(false));\n      }\n    });\n  };\n}\n\nfunction setSuccess(isSuccess) {\n  return {\n    type: UPDATE_USER,\n    isSuccess\n  };\n}\n\nfunction callApi(id, user_name, email, phone, adddress, password, newpassword, callback) {\n  axios({\n    method: 'get',\n    url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n    headers: {\n      'Content-Type': 'application/json',\n      Accept: 'application/json',\n      'Authorization': 'Bearer ' + localStorage.getItem('token')\n    }\n  }).then(Response => {\n    if (Response.status == \"200\") {\n      if (Response.data.password == password) {\n        if (password == newpassword) {\n          var user = {\n            user_name: user_name,\n            password: newpassword,\n            email: email,\n            phone: phone,\n            address: address,\n            role: localStorage.getItem('currentUser').role\n          };\n          axios({\n            method: 'put',\n            url: \"https://127.0.0.1:5001/api/User/\".concat(id),\n            data: user,\n            headers: {\n              'Content-Type': 'application/json',\n              Accept: 'application/json',\n              'Authorization': 'Bearer ' + localStorage.getItem('token')\n            }\n          }).then(res => {\n            if (res.status == \"200\") {\n              var user = {\n                user_name: user_name,\n                email: email,\n                phone: phone,\n                address: address,\n                role: localStorage.getItem('currentUser').role\n              };\n              localStorage.setItem('currentUser', JSON.stringify(user));\n            }\n          });\n        } else alert(\"Password va Password confirm khong khop,vui long nhap lai\");\n      } else alert(\"password cu khong chinh xac!!\");\n    }\n  });\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/user_reducer.js"],"names":["axios","UPDATE_USER","updateUser","id","user_name","email","phone","adddress","password","newpassword","dispatch","callApi","error","setSuccess","isSuccess","type","callback","method","url","headers","Accept","localStorage","getItem","then","Response","status","data","user","address","role","res","setItem","JSON","stringify","alert"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nconst UPDATE_USER='UPDATE_USER';\r\nexport function  updateUser(id,user_name,email,phone,adddress,password,newpassword)\r\n{  \r\n    return dispatch => {\r\n        callApi(id,user_name,email,phone,adddress,password,newpassword,error=> {\r\n          if (!error) {\r\n            dispatch(setSuccess(true));//tra ve cho form\r\n          } else {\r\n            dispatch(setSuccess(false));\r\n          }\r\n        });\r\n      }\r\n}\r\nfunction setSuccess(isSuccess) {\r\n    return {\r\n      type:UPDATE_USER,\r\n      isSuccess\r\n    };\r\n  }\r\n\r\n  function callApi(id,user_name,email,phone,adddress,password,newpassword,callback)\r\n  { \r\n   axios({\r\n    method:'get',\r\n    url: `https://127.0.0.1:5001/api/User/${id}`,\r\n    headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n   }\r\n\r\n   }).then(Response=>{\r\n    if(Response.status==\"200\") {\r\n    if(Response.data.password==password) \r\n     { if(password==newpassword)\r\n       {  var user={\r\n        user_name:user_name,\r\n        password:newpassword,\r\n        email :email,\r\n        phone:phone,\r\n        address:address,\r\n        role:localStorage.getItem('currentUser').role\r\n       }\r\n        axios({\r\n            method:'put',\r\n            url: `https://127.0.0.1:5001/api/User/${id}`,\r\n            data:user,\r\n             headers:{\r\n              'Content-Type': 'application/json',\r\n              Accept: 'application/json',\r\n              'Authorization':'Bearer '+localStorage.getItem('token')\r\n            }\r\n           }).then(res=>{\r\n            if(res.status==\"200\")\r\n               { var user={\r\n                user_name:user_name,\r\n                email :email,\r\n                phone:phone,\r\n                address:address,\r\n                role:localStorage.getItem('currentUser').role \r\n                  }\r\n               localStorage.setItem('currentUser',JSON.stringify(user));\r\n\r\n               }\r\n\r\n\r\n           })   \r\n       }   \r\n       else alert(\"Password va Password confirm khong khop,vui long nhap lai\");\r\n\r\n     }\r\n     else alert(\"password cu khong chinh xac!!\")\r\n\r\n    }\r\n\r\n\r\n   })\r\n\r\n\r\n  }\r\n"]},"metadata":{},"sourceType":"module"}