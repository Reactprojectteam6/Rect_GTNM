{"ast":null,"code":"const ADD_TO_CART = 'ADD_TO_CART'; // const DELETE_PRODUCT_IN_CART = 'DELETE_PRODUCT_IN_CART';\n// const UPDATE_PRODUCT_IN_CART='UPDATE_PRODUCT_IN_CART'\n\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\nexport function actAddToCart(product, quantity) {\n  return {\n    type: ADD_TO_CART,\n    product,\n    quantity\n  };\n} // export function  actDeleteProductInCart(product){\n//     return {\n//         type :DELETE_PRODUCT_IN_CART,\n//         product\n//     }\n// }\n// export function  actUpdateProductInCart(product, quantity ){\n//     return {\n//         type :UPDATE_PRODUCT_IN_CART,\n//         product,\n//         quantity\n//     }\n// }\n\nexport default function cart_reducer(state = initialState, action) {\n  var product = action.product,\n      quantity = action.quantity;\n  var index = -1; // Không tìm thấy => index = -1\n\n  if (action.type == 'ADD_TO_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state[index].quantity += parseInt(quantity);\n    } else {\n      state.push({\n        product,\n        quantity\n      });\n      alert(\"add product into cart successfully\");\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  }\n\n  if (action.type == 'DELETE_PRODUCT_IN_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state.splice(index, 1);\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  }\n\n  if (action.type == 'UPDATE_PRODUCT_IN_CART') {\n    index = findProductInCart(state, product);\n\n    if (index !== -1) {\n      state[index].quantity = quantity;\n    }\n\n    localStorage.setItem('CART', JSON.stringify(state));\n    return [...state];\n  } else return [...state];\n}\n\nvar findProductInCart = (cart, product) => {\n  //tim product da co trong cart hay chua\n  var index = -1;\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/cart_reducer.js"],"names":["ADD_TO_CART","data","JSON","parse","localStorage","getItem","initialState","actAddToCart","product","quantity","type","cart_reducer","state","action","index","findProductInCart","parseInt","push","alert","setItem","stringify","splice","cart","length","i","id"],"mappings":"AAAA,MAAMA,WAAW,GAAG,aAApB,C,CACA;AACA;;AACA,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAX;AACA,IAAIC,YAAY,GAAGL,IAAI,GAAGA,IAAH,GAAU,EAAjC;AAEA,OAAO,SAAUM,YAAV,CAAuBC,OAAvB,EAAgCC,QAAhC,EAA0C;AAG7C,SAAO;AACHC,IAAAA,IAAI,EAACV,WADF;AAEHQ,IAAAA,OAFG;AAGHC,IAAAA;AAHG,GAAP;AAKH,C,CACD;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASE,YAAT,CAAsBC,KAAK,GAAEN,YAA7B,EAA2CO,MAA3C,EAAoD;AAAA,MACzDL,OADyD,GACnCK,MADmC,CACzDL,OADyD;AAAA,MAChDC,QADgD,GACnCI,MADmC,CAChDJ,QADgD;AAE/D,MAAIK,KAAK,GAAG,CAAC,CAAb,CAF+D,CAE/C;;AAChB,MAAGD,MAAM,CAACH,IAAP,IAAa,aAAhB,EACA;AACQI,IAAAA,KAAK,GAAGC,iBAAiB,CAACH,KAAD,EAAQJ,OAAR,CAAzB;;AACA,QAAIM,KAAK,KAAK,CAAC,CAAf,EAAkB;AACdF,MAAAA,KAAK,CAACE,KAAD,CAAL,CAAaL,QAAb,IAAyBO,QAAQ,CAACP,QAAD,CAAjC;AACH,KAFD,MAEO;AACHG,MAAAA,KAAK,CAACK,IAAN,CAAW;AACPT,QAAAA,OADO;AAEPC,QAAAA;AAFO,OAAX;AAIAS,MAAAA,KAAK,CAAC,oCAAD,CAAL;AACH;;AACDd,IAAAA,YAAY,CAACe,OAAb,CAAqB,MAArB,EAA6BjB,IAAI,CAACkB,SAAL,CAAeR,KAAf,CAA7B;AACA,WAAO,CAAC,GAAGA,KAAJ,CAAP;AAEH;;AACL,MAAGC,MAAM,CAACH,IAAP,IAAa,wBAAhB,EACC;AACOI,IAAAA,KAAK,GAAGC,iBAAiB,CAACH,KAAD,EAAQJ,OAAR,CAAzB;;AACA,QAAIM,KAAK,KAAK,CAAC,CAAf,EAAkB;AACdF,MAAAA,KAAK,CAACS,MAAN,CAAaP,KAAb,EAAoB,CAApB;AAEH;;AACDV,IAAAA,YAAY,CAACe,OAAb,CAAqB,MAArB,EAA6BjB,IAAI,CAACkB,SAAL,CAAeR,KAAf,CAA7B;AACA,WAAO,CAAC,GAAGA,KAAJ,CAAP;AAEH;;AACJ,MAAGC,MAAM,CAACH,IAAP,IAAa,wBAAhB,EACA;AACOI,IAAAA,KAAK,GAAGC,iBAAiB,CAACH,KAAD,EAAQJ,OAAR,CAAzB;;AACA,QAAGM,KAAK,KAAK,CAAC,CAAd,EAAgB;AACZF,MAAAA,KAAK,CAACE,KAAD,CAAL,CAAaL,QAAb,GAAwBA,QAAxB;AACH;;AACDL,IAAAA,YAAY,CAACe,OAAb,CAAqB,MAArB,EAA6BjB,IAAI,CAACkB,SAAL,CAAeR,KAAf,CAA7B;AACA,WAAO,CAAC,GAAGA,KAAJ,CAAP;AACH,GARJ,MASK,OAAO,CAAC,GAAGA,KAAJ,CAAP;AAET;;AAED,IAAIG,iBAAiB,GAAG,CAACO,IAAD,EAAOd,OAAP,KAAmB;AAAC;AACxC,MAAIM,KAAK,GAAG,CAAC,CAAb;;AACA,MAAIQ,IAAI,CAACC,MAAL,GAAc,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACC,MAAzB,EAAiCC,CAAC,EAAlC,EAAsC;AAClC,UAAIF,IAAI,CAACE,CAAD,CAAJ,CAAQhB,OAAR,CAAgBiB,EAAhB,KAAuBjB,OAAO,CAACiB,EAAnC,EAAuC;AACnCX,QAAAA,KAAK,GAAGU,CAAR;AACA;AACH;AACJ;AACJ;;AACD,SAAOV,KAAP;AACH,CAXD","sourcesContent":["const ADD_TO_CART = 'ADD_TO_CART';\n// const DELETE_PRODUCT_IN_CART = 'DELETE_PRODUCT_IN_CART';\n// const UPDATE_PRODUCT_IN_CART='UPDATE_PRODUCT_IN_CART'\nvar data = JSON.parse(localStorage.getItem('CART'));\nvar initialState = data ? data : [];\n\nexport function  actAddToCart(product, quantity) {\n    \n    \n    return {\n        type:ADD_TO_CART,\n        product,\n        quantity\n    }\n}\n// export function  actDeleteProductInCart(product){\n//     return {\n//         type :DELETE_PRODUCT_IN_CART,\n//         product\n//     }\n// }\n\n// export function  actUpdateProductInCart(product, quantity ){\n//     return {\n//         type :UPDATE_PRODUCT_IN_CART,\n//         product,\n//         quantity\n//     }\n// }\nexport default function cart_reducer(state =initialState, action)  {\n    var { product, quantity } = action;\n    var index = -1; // Không tìm thấy => index = -1\n    if(action.type=='ADD_TO_CART')\n    {        \n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state[index].quantity += parseInt(quantity);\n            } else {\n                state.push({\n                    product,\n                    quantity\n                });\n                alert(\"add product into cart successfully\");\n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n\n        }       \n    if(action.type=='DELETE_PRODUCT_IN_CART')\n     {\n            index = findProductInCart(state, product);\n            if (index !== -1) {\n                state.splice(index, 1);\n               \n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n\n        }\n     if(action.type=='UPDATE_PRODUCT_IN_CART')\n     {\n            index = findProductInCart(state, product);\n            if(index !== -1){\n                state[index].quantity = quantity;\n            }\n            localStorage.setItem('CART', JSON.stringify(state));\n            return [...state];\n        }      \n     else return [...state];\n    \n}\n\nvar findProductInCart = (cart, product) => {//tim product da co trong cart hay chua\n    var index = -1;\n    if (cart.length > 0) {\n        for (var i = 0; i < cart.length; i++) {\n            if (cart[i].product.id === product.id) {\n                index = i;\n                break;\n            }\n        }\n    }\n    return index;\n}\n"]},"metadata":{},"sourceType":"module"}