{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst SET_ORDER = 'SET_ORDER';\nexport function setOrder(order, user_id, state, address, email, phone, total_payment, payment_method, fullname) {\n  return dispatch => {\n    callApi(order, user_id, state, address, email, phone, total_payment, payment_method, fullname, error => {\n      if (!error) {\n        dispatch(setSuccess(true)); //tra ve cho form\n      } else {\n        dispatch(setSuccess(false)); //tra ve cho form\n      }\n    });\n  };\n}\n\nfunction setSuccess(isSuccess) {\n  return {\n    type: SET_ORDER,\n    isSuccess\n  };\n}\n\nfunction callApi(order, user_id, state, address, email, phone, total_payment, payment_method, fullname, callback) {\n  var count = 0;\n\n  if (order.length > 0) {\n    for (var i = 0; i < order.length; i++) {\n      if (order[i].quantity <= order[i].product.quantity) {\n        count++;\n      }\n    }\n  }\n\n  if (count != 0) {\n    var recei = {\n      address: address,\n      email: email,\n      fullname: fullname,\n      phone: phone\n    };\n    var token = 'Bearer ' + localStorage.getItem('token'); //tao receiver\n\n    axios({\n      method: 'post',\n      url: \"https://127.0.0.1:5001/api/Receiver\",\n      data: recei,\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': token\n      }\n    }).then(response => {\n      if (response.status == \"200\") {\n        alert(\"tao receiver thanh cong!!!\");\n        receiver_id = response.data.id;\n        var or = {\n          date_create: Date.now(),\n          date_paid: Date.now(),\n          status: state,\n          total: total_payment,\n          payment_id: payment_method,\n          reciever_id: receiver_id,\n          user_id: user_id\n        };\n        axios({\n          method: 'post',\n          url: \"https://127.0.0.1:5001/api/Order\",\n          data: or,\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': token\n          }\n        }).then(response => {\n          if (response.status == \"200\") {\n            alert(\"tao order thanh cong!!!\");\n            order_id = response.data.id;\n            axios({\n              method: 'post',\n              url: \"https://127.0.0.1:5001/api/Order\",\n              data: or,\n              headers: {\n                'Content-Type': 'application/json',\n                Accept: 'application/json',\n                'Authorization': token\n              }\n            }).then(response => {\n              if (response.status == \"200\") {\n                alert(\"tao order thanh cong!!!\");\n                order_id = response.data.id;\n\n                for (var i = 0; i < order.length; i++) {\n                  if (order[i].quantity <= order[i].product.quantity) {\n                    let order_detail = {\n                      price: order[i].product.price,\n                      product_id: order[i].product.id,\n                      quantity: order[i].quantity,\n                      order_id: order_id\n                    };\n                    axios({\n                      method: 'post',\n                      url: \"https://127.0.0.1:5001/api/Order_detail\",\n                      data: order_detail,\n                      headers: {\n                        'Content-Type': 'application/json',\n                        Accept: 'application/json',\n                        'Authorization': token\n                      }\n                    }).then(response => {\n                      if (response.status == \"200\") {\n                        alert(\"tao order detail thanh cong!!!\");\n                        order_id = response.data.id;\n                      } else return callback(new Error(\"loi,khong the tao order\"));\n                    });\n                  }\n                }\n              } else return callback(new Error(\"loi,khong the tao order\"));\n            });\n          } else return callback(new Error(\"loi,khong the tao order\"));\n        });\n      } else return callback(new Error(\"loi,khong tao dc receiver\"));\n    });\n  } else return callback(new Error(\"Loi\"));\n}\n\nvar order_state = {\n  isSuccess: false\n};\nexport default function order_reducer(state = order_state, action) {\n  if (action.type == 'SET_ORDER') {\n    let newState = _objectSpread({}, state);\n\n    newState.isSuccess = action.isSuccess;\n    if (newState.error == true) alert(\"order thanh cong,vui long cho nhan hang\");\n    return newState;\n  }\n\n  return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/order_reducer.js"],"names":["axios","SET_ORDER","setOrder","order","user_id","state","address","email","phone","total_payment","payment_method","fullname","dispatch","callApi","error","setSuccess","isSuccess","type","callback","count","length","i","quantity","product","recei","token","localStorage","getItem","method","url","data","headers","Accept","then","response","status","alert","receiver_id","id","or","date_create","Date","now","date_paid","total","payment_id","reciever_id","order_id","order_detail","price","product_id","Error","order_state","order_reducer","action","newState"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nconst SET_ORDER='SET_ORDER';\r\nexport function   setOrder(order,user_id,state,address,email,phone,total_payment,payment_method,fullname)\r\n{ return dispatch => {\r\n    callApi(order,user_id,state,address,email,phone,total_payment,payment_method,fullname,error=> {\r\n      if (!error) {\r\n        dispatch(setSuccess(true));//tra ve cho form\r\n      } else {\r\n        dispatch(setSuccess(false));//tra ve cho form\r\n      }\r\n    });\r\n  }\r\n}\r\n  function setSuccess(isSuccess) {\r\n    return {\r\n      type: SET_ORDER,\r\n      isSuccess\r\n    };\r\n  }\r\n  \r\nfunction callApi(order,user_id,state,address,email,phone,total_payment,payment_method,fullname,callback) {\r\n  var count=0;\r\n           if (order.length > 0 ) {\r\n             for (var i = 0; i < order.length; i++) {\r\n               if(order[i].quantity<=order[i].product.quantity)\r\n                { count++;\r\n                \r\n                 }\r\n                }\r\n             }        \r\n               \r\n    if(count!=0)\r\n    { \r\n        var recei={\r\n        address :address,\r\n        email :email,\r\n        fullname:fullname,\r\n        phone:phone\r\n      \r\n        }\r\n        var token='Bearer '+localStorage.getItem('token');\r\n           //tao receiver\r\n         axios(\r\n    \r\n        {  method:'post',\r\n           url: `https://127.0.0.1:5001/api/Receiver`,\r\n           data:recei,\r\n           headers:{\r\n            'Content-Type': 'application/json',\r\n            Accept: 'application/json',\r\n            'Authorization':token\r\n          }\r\n            \r\n        }\r\n      ).then(response=>{\r\n        if(response.status==\"200\") {alert(\"tao receiver thanh cong!!!\");\r\n        receiver_id=response.data.id;\r\n        var or={\r\n            date_create :Date.now(),\r\n            date_paid :Date.now(),\r\n            status :state,\r\n            total :total_payment,\r\n            payment_id :payment_method,\r\n            reciever_id :receiver_id,\r\n            user_id :user_id\r\n          }\r\n          axios(\r\n    \r\n            {  method:'post',\r\n               url: `https://127.0.0.1:5001/api/Order`,\r\n               data:or,\r\n               headers:{\r\n                'Content-Type': 'application/json',\r\n                Accept: 'application/json',\r\n                'Authorization':token\r\n              }\r\n                \r\n            }\r\n          ).then(response=>{\r\n            if(response.status==\"200\")\r\n            { alert(\"tao order thanh cong!!!\");\r\n              order_id=response.data.id;\r\n              axios(\r\n    \r\n                {  method:'post',\r\n                   url: `https://127.0.0.1:5001/api/Order`,\r\n                   data:or,\r\n                   headers:{\r\n                    'Content-Type': 'application/json',\r\n                    Accept: 'application/json',\r\n                    'Authorization':token\r\n                  }\r\n                    \r\n                }\r\n              ).then(response=>{\r\n                if(response.status==\"200\")\r\n                { alert(\"tao order thanh cong!!!\");\r\n                  order_id=response.data.id;\r\n                  for (var i = 0; i < order.length; i++) {\r\n                    if(order[i].quantity<=order[i].product.quantity)\r\n                    {\r\n                        let order_detail={\r\n                         price:order[i].product.price,\r\n                         product_id :order[i].product.id,\r\n                         quantity :order[i].quantity,\r\n                         order_id :order_id\r\n                        }\r\n                    axios(\r\n                 \r\n                     {  method:'post',\r\n                        url: `https://127.0.0.1:5001/api/Order_detail`,\r\n                        data:order_detail,\r\n                        headers:{\r\n                         'Content-Type': 'application/json',\r\n                         Accept: 'application/json',\r\n                         'Authorization':token\r\n                       }\r\n                         \r\n                     }\r\n                   ).then(response=>{\r\n                     if(response.status==\"200\")\r\n                     { alert(\"tao order detail thanh cong!!!\");\r\n                       order_id=response.data.id;\r\n                   }\r\n                   else return callback(new Error(\"loi,khong the tao order\"))\r\n                     \r\n                   }\r\n                 \r\n                   )\r\n                 }\r\n             }\r\n                 \r\n\r\n              }\r\n              else return callback(new Error(\"loi,khong the tao order\"))\r\n                \r\n              }\r\n            \r\n              )\r\n          }\r\n          else return callback(new Error(\"loi,khong the tao order\"))\r\n            \r\n          }\r\n        \r\n          )\r\n\r\n\r\n         }\r\n         else return  callback(new Error(\"loi,khong tao dc receiver\")); \r\n      }\r\n    \r\n      )\r\n      \r\n     \r\n\r\n    \r\n      \r\n\r\n    } \r\n    else return callback(new Error(\"Loi\"))\r\n    \r\n \r\n \r\n }\r\n \r\nvar order_state={\r\n  isSuccess:false,\r\n}\r\nexport default function order_reducer(state =order_state, action) {\r\n  if(action.type=='SET_ORDER')\r\n  {\r\n    let newState={...state};\r\n    newState.isSuccess=action.isSuccess;\r\n    if(newState.error==true) alert(\"order thanh cong,vui long cho nhan hang\");\r\n    return newState;\r\n  }\r\n      return state;\r\n  \r\n}"]},"metadata":{},"sourceType":"module"}