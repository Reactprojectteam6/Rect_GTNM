{"ast":null,"code":"const RECENTLY_VIEWED = 'RECENTLY_VIEWED';\nvar data = JSON.parse(localStorage.getItem('RECENT'));\nvar initialState = data ? data : [];\nexport function addToRecentlyViewed(product) {\n  return {\n    type: RECENTLY_VIEWED,\n    product\n  };\n}\nexport default function recent_reducer(state = initialState, action) {\n  var product = action.product;\n  var index = -1; // Không tìm thấy => index = -1\n\n  if (action.type == 'RECENTLY_VIEWED') {\n    index = findProductInCart(state, product);\n\n    if (index == -1) {\n      state.push({\n        product\n      });\n    }\n\n    localStorage.setItem('RECENT', JSON.stringify(state));\n    return [...state];\n  } else return [...state];\n}\n\nvar findProductInCart = (cart, product) => {\n  //tim product da co trong cart hay chua\n  var index = -1;\n\n  if (cart.length > 0) {\n    for (var i = 0; i < cart.length; i++) {\n      if (cart[i].product.id === product.id) {\n        index = i;\n        break;\n      }\n    }\n  }\n\n  return index;\n};","map":{"version":3,"sources":["D:/github/Rect_GTNM/src/redux/recent_reducer.js"],"names":["RECENTLY_VIEWED","data","JSON","parse","localStorage","getItem","initialState","addToRecentlyViewed","product","type","recent_reducer","state","action","index","findProductInCart","push","setItem","stringify","cart","length","i","id"],"mappings":"AAAA,MAAMA,eAAe,GAAG,iBAAxB;AACA,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAX;AACA,IAAIC,YAAY,GAAGL,IAAI,GAAGA,IAAH,GAAU,EAAjC;AACA,OAAO,SAAUM,mBAAV,CAA8BC,OAA9B,EAAuC;AAC1C,SAAO;AACHC,IAAAA,IAAI,EAACT,eADF;AAEHQ,IAAAA;AAFG,GAAP;AAKH;AAED,eAAe,SAASE,cAAT,CAAwBC,KAAK,GAAEL,YAA/B,EAA6CM,MAA7C,EAAsD;AAAA,MAC3DJ,OAD2D,GAC/CI,MAD+C,CAC3DJ,OAD2D;AAEjE,MAAIK,KAAK,GAAG,CAAC,CAAb,CAFiE,CAEjD;;AAChB,MAAGD,MAAM,CAACH,IAAP,IAAa,iBAAhB,EACA;AAASI,IAAAA,KAAK,GAAGC,iBAAiB,CAACH,KAAD,EAAQH,OAAR,CAAzB;;AACD,QAAIK,KAAK,IAAI,CAAC,CAAd,EAAiB;AACbF,MAAAA,KAAK,CAACI,IAAN,CAAW;AACPP,QAAAA;AADO,OAAX;AAGH;;AACDJ,IAAAA,YAAY,CAACY,OAAb,CAAqB,QAArB,EAA+Bd,IAAI,CAACe,SAAL,CAAeN,KAAf,CAA/B;AACA,WAAO,CAAC,GAAGA,KAAJ,CAAP;AAEH,GAVL,MAWM,OAAO,CAAC,GAAGA,KAAJ,CAAP;AAET;;AAED,IAAIG,iBAAiB,GAAG,CAACI,IAAD,EAAOV,OAAP,KAAmB;AAAC;AACxC,MAAIK,KAAK,GAAG,CAAC,CAAb;;AACA,MAAIK,IAAI,CAACC,MAAL,GAAc,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACC,MAAzB,EAAiCC,CAAC,EAAlC,EAAsC;AAClC,UAAIF,IAAI,CAACE,CAAD,CAAJ,CAAQZ,OAAR,CAAgBa,EAAhB,KAAuBb,OAAO,CAACa,EAAnC,EAAuC;AACnCR,QAAAA,KAAK,GAAGO,CAAR;AACA;AACH;AACJ;AACJ;;AACD,SAAOP,KAAP;AACH,CAXD","sourcesContent":["const RECENTLY_VIEWED = 'RECENTLY_VIEWED';\r\nvar data = JSON.parse(localStorage.getItem('RECENT'));\r\nvar initialState = data ? data : [];\r\nexport function  addToRecentlyViewed(product) {\r\n    return {\r\n        type:RECENTLY_VIEWED,\r\n        product,\r\n       \r\n    }\r\n}\r\n\r\nexport default function recent_reducer(state =initialState, action)  {\r\n    var { product } = action;\r\n    var index = -1; // Không tìm thấy => index = -1\r\n    if(action.type=='RECENTLY_VIEWED')\r\n    {        index = findProductInCart(state, product);\r\n            if (index == -1) {\r\n                state.push({\r\n                    product,\r\n                });\r\n            }\r\n            localStorage.setItem('RECENT', JSON.stringify(state));\r\n            return [...state];\r\n\r\n        }       \r\n     else return [...state];\r\n    \r\n}\r\n\r\nvar findProductInCart = (cart, product) => {//tim product da co trong cart hay chua\r\n    var index = -1;\r\n    if (cart.length > 0) {\r\n        for (var i = 0; i < cart.length; i++) {\r\n            if (cart[i].product.id === product.id) {\r\n                index = i;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return index;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}