{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\kieu\\\\Desktop\\\\final_project\\\\my_app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nconst GET_PRODUCT_DETAIL = 'GET_PRODUCT_DETAIL';\nconst GET_COLORS = 'GET_COLORS';\nconst GET_RATING = 'GET_RATING';\nconst GET_PRODUCT_BY_NAME_AND_COLOR = 'GET_PRODUCT_BY_NAME_AND_COLOR';\nconst SET_COMMENT = 'SET_COMMENT';\nconst SORT = 'SORT';\nexport function show(product) {\n  return dispatch => {\n    dispatch({\n      type: GET_PRODUCT_DETAIL,\n      Product: product\n    }); //tra ve cho form\n  };\n}\nexport function getColors(name) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(name, \"/Colors\")\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_COLORS,\n        Colors: response.data\n      }); //tra ve cho form\n    });\n  };\n}\nexport function getRating(id) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(id, \"/Rating\")\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_RATING,\n        Rate: response.data\n      }); //tra ve cho form\n    });\n  };\n} //detail chon mau\n\nexport function getProductByNameAndColor(product, name, color, shop_id) {\n  return dispatch => {\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product/\".concat(name, \"/\").concat(color, \"/\").concat(shop_id)\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: GET_PRODUCT_BY_NAME_AND_COLOR,\n        Product: response.data\n      }); //tra ve cho form\n\n      if (response.status == \"404\") {\n        alert(\"Sản phẩm này hiện tại hết màu này,quý khách vui lòng chọn màu khác,xin cảm ơn ạ!!!\");\n        dispatch({\n          type: GET_PRODUCT_BY_NAME_AND_COLOR,\n          Product: product\n        });\n      }\n    });\n  };\n} //comment\n\nexport function setComment(user_id, product_id, rate) {\n  console.log(user_id);\n  console.log(product_id);\n  console.log(rate);\n  var comment = {\n    contents: \"san pham tot\",\n    rate: rate,\n    product_id: product_id,\n    user_id: user_id\n  };\n  var token = 'Bearer ' + localStorage.getItem('token');\n  return dispatch => {\n    axios({\n      method: 'post',\n      url: \"https://127.0.0.1:5001/api/Comment\",\n      data: comment,\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': token\n      }\n    }).then(response => {\n      if (response.status == \"200\") dispatch({\n        type: \"SET_COMMENT\",\n        payload: true\n      });else dispatch({\n        type: \"SET_COMMENT\",\n        payload: false\n      });\n    });\n  };\n} //sort\n\nexport function sort(by, value) {\n  console.log(\"by\");\n  console.log(by);\n  console.log(\"value\");\n  console.log(value);\n  return dispatch => {\n    var id = null;\n\n    if (by == \"Rating\") {\n      if (value == \"1-3\") {\n        axios({\n          method: 'get',\n          url: \"https://127.0.0.1:5001/api/Product/Rating/\".concat(1, \"-\", 3),\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(res => {\n          if (res.status == \"200\") dispatch({\n            type: SORT,\n            payload: res.data\n          });\n        });\n      }\n\n      if (value == \"4-5\") {\n        axios({\n          method: 'get',\n          url: \"https://127.0.0.1:5001/api/Product/Rating/\".concat(4, \"-\", 5),\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json',\n            'Authorization': 'Bearer ' + localStorage.getItem('token')\n          }\n        }).then(res => {\n          console.log(\"4-5\");\n          console.log(res.data);\n          if (res.status == \"200\") dispatch({\n            type: SORT,\n            payload: res.data\n          });\n        });\n      }\n    }\n\n    if (by == \"Price\") {\n      var data = [];\n      axios({\n        method: 'get',\n        url: \"https://127.0.0.1:5001/api/Product\",\n        headers: {\n          'Content-Type': 'application/json',\n          Accept: 'application/json',\n          'Authorization': 'Bearer ' + localStorage.getItem('token')\n        }\n      }).then(res => {\n        if (res.data.length > 0) {\n          data = res.data;\n\n          if (value == \"1-300000\") {\n            const result = data.filter(data => data.price > 1 && data.price < 301000);\n            dispatch({\n              type: SORT,\n              payload: result\n            });\n          }\n\n          if (value == \"300000-500000\") {\n            const result = data.filter(data => data.price > 301000 && data.price < 501000);\n            console.log(\"result\");\n            dispatch({\n              type: SORT,\n              payload: result\n            });\n          }\n\n          if (value == \"500000-1000000\") {\n            console.log(\"result\");\n            const result = data.filter(data => data.price > 501000 && data.price < 1000000);\n            dispatch({\n              type: SORT,\n              payload: result\n            });\n          }\n        }\n      });\n    }\n\n    if (by == \"Sort\") var data = [];\n    axios({\n      method: 'get',\n      url: \"https://127.0.0.1:5001/api/Product\",\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(res => {\n      if (res.data.length > 0) {\n        data = res.data;\n\n        if (value == \"Tên sản phẩm\") {\n          const result = data.sort((a, b) => a.product_name.localeCompare(b.product_name, 'es', {\n            sensitivity: 'base'\n          }));\n          dispatch({\n            type: SORT,\n            payload: result\n          });\n        }\n\n        if (value == \"Giá\") {\n          const result = data.sort((a, b) => a.price.localeCompare(b.price, 'es', {\n            sensitivity: 'base'\n          }));\n          dispatch({\n            type: SORT,\n            payload: result\n          });\n        }\n      }\n    });\n  };\n}\nvar data = JSON.parse(localStorage.getItem('detail'));\nvar color = JSON.parse(localStorage.getItem('color'));\nvar dt1 = localStorage.getItem('rate');\nvar filter = JSON.parse(localStorage.getItem('filter'));\nvar initialState = {\n  Product: data ? data : [],\n  Colors: color ? color : [],\n  Sizes: [],\n  Rate: dt1 ? dt1 : null,\n  hasComment: null,\n  productsFilter: filter ? filter : []\n};\nexport default function product_reducer(state = initialState, action) {\n  if (action.type == 'GET_PRODUCT_DETAIL') {\n    let newState = _objectSpread({}, state);\n\n    newState.Product = action.Product;\n    localStorage.setItem('detail', JSON.stringify(newState.Product));\n    return newState;\n  }\n\n  if (action.type == 'GET_COLORS') {\n    let newState = _objectSpread({}, state);\n\n    newState.Colors = action.Colors;\n    console.log(newState.Colors);\n    localStorage.setItem('color', JSON.stringify(newState.Colors));\n    return newState;\n  }\n\n  if (action.type == 'GET_RATING') {\n    let newState = _objectSpread({}, state);\n\n    newState.Rate = action.Rate;\n    console.log(newState.Rate);\n    localStorage.setItem(\"rate\", newState.Rate);\n    return newState;\n  }\n\n  if (action.type == 'GET_PRODUCT_BY_NAME_AND_COLOR') {\n    let newState = _objectSpread({}, state);\n\n    newState.Product = action.Product;\n    console.log(\"adashjfadsgfd\");\n    console.log(action.product);\n    console.log(newState.Product);\n    localStorage.setItem(\"detail\", JSON.stringify(newState.Product));\n    return newState;\n  }\n\n  if (action.type == \"SET_COMMENT\") {\n    let newState = _objectSpread({}, state);\n\n    newState.hasComment = action.payload;\n    if (newState.hasComment == true) alert(\"cam on danh gia ve san pham nay cua ban\");\n    return newState;\n  }\n\n  if (action.type == 'SORT') {\n    let newState = _objectSpread({}, state);\n\n    newState.productsFilter = action.payload;\n    localStorage.setItem(\"filter\", JSON.stringify(newState.productsFilter));\n    return newState;\n  } else return state;\n}","map":{"version":3,"sources":["C:/Users/kieu/Desktop/final_project/my_app/src/redux/product_reducer.js"],"names":["axios","GET_PRODUCT_DETAIL","GET_COLORS","GET_RATING","GET_PRODUCT_BY_NAME_AND_COLOR","SET_COMMENT","SORT","show","product","dispatch","type","Product","getColors","name","method","url","then","response","status","Colors","data","getRating","id","Rate","getProductByNameAndColor","color","shop_id","alert","setComment","user_id","product_id","rate","console","log","comment","contents","token","localStorage","getItem","headers","Accept","payload","sort","by","value","res","length","result","filter","price","a","b","product_name","localeCompare","sensitivity","JSON","parse","dt1","initialState","Sizes","hasComment","productsFilter","product_reducer","state","action","newState","setItem","stringify"],"mappings":";;;;;;AACA,OAAOA,KAAP,MAAkB,OAAlB;AACA,MAAMC,kBAAkB,GAAG,oBAA3B;AACA,MAAMC,UAAU,GAAC,YAAjB;AACA,MAAMC,UAAU,GAAC,YAAjB;AACA,MAAMC,6BAA6B,GAAC,+BAApC;AACA,MAAMC,WAAW,GAAC,aAAlB;AACA,MAAMC,IAAI,GAAC,MAAX;AACA,OAAO,SAASC,IAAT,CAAcC,OAAd,EAAuB;AAC3B,SAAOC,QAAQ,IAAI;AAChBA,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAACT,kBAAN;AAAyBU,MAAAA,OAAO,EAACH;AAAjC,KAAD,CAAR,CADgB,CACoC;AAGvD,GAJA;AAKF;AACD,OAAO,SAASI,SAAT,CAAmBC,IAAnB,EACP;AACE,SAAOJ,QAAQ,IAAI;AACjBT,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,+CAAwCF,IAAxC;AAFC,KAAD,CAAL,CAKGG,IALH,CAKQC,QAAQ,IAAI;AAClB,UAAGA,QAAQ,CAACC,MAAT,IAAiB,KAApB,EACFT,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAACR,UAAN;AAAiBiB,QAAAA,MAAM,EAACF,QAAQ,CAACG;AAAjC,OAAD,CAAR,CAFoB,CAE6B;AAEhD,KATD;AAUH,GAXC;AAYD;AAED,OAAO,SAASC,SAAT,CAAmBC,EAAnB,EACP;AACE,SAAOb,QAAQ,IAAI;AACjBT,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,+CAAwCO,EAAxC;AAFC,KAAD,CAAL,CAKGN,IALH,CAKQC,QAAQ,IAAI;AAClB,UAAGA,QAAQ,CAACC,MAAT,IAAiB,KAApB,EACFT,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAACP,UAAN;AAAiBoB,QAAAA,IAAI,EAACN,QAAQ,CAACG;AAA/B,OAAD,CAAR,CAFoB,CAE2B;AAC9C,KARD;AAUH,GAXC;AAaD,C,CACD;;AACA,OAAO,SAASI,wBAAT,CAAkChB,OAAlC,EAA0CK,IAA1C,EAA+CY,KAA/C,EAAqDC,OAArD,EACP;AACE,SAAOjB,QAAQ,IAAI;AACjBT,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,+CAAwCF,IAAxC,cAAgDY,KAAhD,cAAyDC,OAAzD;AAFC,KAAD,CAAL,CAGIV,IAHJ,CAGSC,QAAQ,IAAI;AACnB,UAAGA,QAAQ,CAACC,MAAT,IAAiB,KAApB,EAEFT,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAACN,6BAAN;AAAoCO,QAAAA,OAAO,EAACM,QAAQ,CAACG;AAArD,OAAD,CAAR,CAHqB,CAGgD;;AACrE,UAAGH,QAAQ,CAACC,MAAT,IAAiB,KAApB,EACA;AAAGS,QAAAA,KAAK,CAAC,oFAAD,CAAL;AACDlB,QAAAA,QAAQ,CAAC;AAACC,UAAAA,IAAI,EAACN,6BAAN;AAAoCO,UAAAA,OAAO,EAACH;AAA5C,SAAD,CAAR;AACA;AACD,KAXD;AAaH,GAdC;AAgBD,C,CACD;;AACA,OAAO,SAASoB,UAAT,CAAoBC,OAApB,EAA4BC,UAA5B,EAAuCC,IAAvC,EACP;AAAIC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAZ;AACAG,EAAAA,OAAO,CAACC,GAAR,CAAYH,UAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACF,MAAIG,OAAO,GAAC;AACZC,IAAAA,QAAQ,EAAE,cADE;AAEZJ,IAAAA,IAAI,EAAEA,IAFM;AAGZD,IAAAA,UAAU,EAACA,UAHC;AAIZD,IAAAA,OAAO,EAAEA;AAJG,GAAZ;AAME,MAAIO,KAAK,GAAC,YAAUC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAApB;AACD,SAAO7B,QAAQ,IAAE;AAClBT,IAAAA,KAAK,CAEH;AAAGc,MAAAA,MAAM,EAAC,MAAV;AACGC,MAAAA,GAAG,sCADN;AAEGK,MAAAA,IAAI,EAACc,OAFR;AAGGK,MAAAA,OAAO,EAAC;AACP,wBAAgB,kBADT;AAEPC,QAAAA,MAAM,EAAE,kBAFD;AAGP,yBAAgBJ;AAHT;AAHX,KAFG,CAAL,CAYEpB,IAZF,CAYOC,QAAQ,IAAE;AACf,UAAGA,QAAQ,CAACC,MAAT,IAAiB,KAApB,EACAT,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAAC,aAAN;AAAoB+B,QAAAA,OAAO,EAAC;AAA5B,OAAD,CAAR,CADA,KAEMhC,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAAC,aAAN;AAAoB+B,QAAAA,OAAO,EAAC;AAA5B,OAAD,CAAR;AACP,KAhBD;AAmBD,GApBE;AAsBF,C,CACD;;AAGA,OAAO,SAASC,IAAT,CAAcC,EAAd,EAAiBC,KAAjB,EAAwB;AAC7BZ,EAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYU,EAAZ;AACAX,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAD,EAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ;AACF,SAAOnC,QAAQ,IAAI;AACjB,QAAIa,EAAE,GAAC,IAAP;;AACF,QAAGqB,EAAE,IAAE,QAAP,EACE;AACE,UAAGC,KAAK,IAAE,KAAV,EACA;AACF5C,QAAAA,KAAK,CAAC;AACFc,UAAAA,MAAM,EAAC,KADL;AAEFC,UAAAA,GAAG,sDAA+C,CAA/C,OAAoD,CAApD,CAFD;AAGFwB,UAAAA,OAAO,EAAC;AACT,4BAAgB,kBADP;AAETC,YAAAA,MAAM,EAAE,kBAFC;AAGT,6BAAgB,YAAUH,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHjB;AAHN,SAAD,CAAL,CAWDtB,IAXC,CAWI6B,GAAG,IAAI;AACR,cAAGA,GAAG,CAAC3B,MAAJ,IAAY,KAAf,EAAuBT,QAAQ,CAAC;AAACC,YAAAA,IAAI,EAACJ,IAAN;AAAWmC,YAAAA,OAAO,EAACI,GAAG,CAACzB;AAAvB,WAAD,CAAR;AACvB,SAbH;AAeC;;AACH,UAAGwB,KAAK,IAAE,KAAV,EACA;AACA5C,QAAAA,KAAK,CAAC;AACJc,UAAAA,MAAM,EAAC,KADH;AAEJC,UAAAA,GAAG,sDAA+C,CAA/C,OAAoD,CAApD,CAFC;AAGJwB,UAAAA,OAAO,EAAC;AACP,4BAAgB,kBADT;AAEPC,YAAAA,MAAM,EAAE,kBAFD;AAGP,6BAAgB,YAAUH,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHnB;AAHJ,SAAD,CAAL,CAWCtB,IAXD,CAWM6B,GAAG,IAAI;AACXb,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAD,UAAAA,OAAO,CAACC,GAAR,CAAYY,GAAG,CAACzB,IAAhB;AACG,cAAGyB,GAAG,CAAC3B,MAAJ,IAAY,KAAf,EAAsBT,QAAQ,CAAC;AAACC,YAAAA,IAAI,EAACJ,IAAN;AAAWmC,YAAAA,OAAO,EAACI,GAAG,CAACzB;AAAvB,WAAD,CAAR;AACtB,SAfL;AAiBG;AAEA;;AAEH,QAAGuB,EAAE,IAAE,OAAP,EACA;AACE,UAAIvB,IAAI,GAAC,EAAT;AACEpB,MAAAA,KAAK,CAAC;AACJc,QAAAA,MAAM,EAAC,KADH;AAEJC,QAAAA,GAAG,sCAFC;AAGJwB,QAAAA,OAAO,EAAC;AACP,0BAAgB,kBADT;AAEPC,UAAAA,MAAM,EAAE,kBAFD;AAGP,2BAAgB,YAAUH,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHnB;AAHJ,OAAD,CAAL,CAWCtB,IAXD,CAWM6B,GAAG,IAAI;AAEX,YAAIA,GAAG,CAACzB,IAAJ,CAAS0B,MAAT,GAAgB,CAApB,EACE;AAAE1B,UAAAA,IAAI,GAACyB,GAAG,CAACzB,IAAT;;AACA,cAAGwB,KAAK,IAAE,UAAV,EACA;AAAC,kBAAMG,MAAM,GAAC3B,IAAI,CAAC4B,MAAL,CAAY5B,IAAI,IAAGA,IAAI,CAAC6B,KAAL,GAAW,CAAX,IAAc7B,IAAI,CAAC6B,KAAL,GAAW,MAA5C,CAAb;AACCxC,YAAAA,QAAQ,CAAC;AAACC,cAAAA,IAAI,EAACJ,IAAN;AAAWmC,cAAAA,OAAO,EAACM;AAAnB,aAAD,CAAR;AAED;;AACD,cAAGH,KAAK,IAAE,eAAV,EACA;AACE,kBAAMG,MAAM,GAAC3B,IAAI,CAAC4B,MAAL,CAAY5B,IAAI,IAAGA,IAAI,CAAC6B,KAAL,GAAW,MAAX,IAAmB7B,IAAI,CAAC6B,KAAL,GAAW,MAAjD,CAAb;AACAjB,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACAxB,YAAAA,QAAQ,CAAC;AAACC,cAAAA,IAAI,EAACJ,IAAN;AAAWmC,cAAAA,OAAO,EAACM;AAAnB,aAAD,CAAR;AACD;;AACD,cAAGH,KAAK,IAAE,gBAAV,EACA;AAAGZ,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AAED,kBAAMc,MAAM,GAAC3B,IAAI,CAAC4B,MAAL,CAAY5B,IAAI,IAAGA,IAAI,CAAC6B,KAAL,GAAW,MAAX,IAAmB7B,IAAI,CAAC6B,KAAL,GAAW,OAAjD,CAAb;AACAxC,YAAAA,QAAQ,CAAC;AAACC,cAAAA,IAAI,EAACJ,IAAN;AAAWmC,cAAAA,OAAO,EAACM;AAAnB,aAAD,CAAR;AACD;AACH;AACF,OAjCF;AAmCH;;AACD,QAAGJ,EAAE,IAAE,MAAP,EACA,IAAIvB,IAAI,GAAC,EAAT;AACApB,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAC,KADH;AAEJC,MAAAA,GAAG,sCAFC;AAGJwB,MAAAA,OAAO,EAAC;AACP,wBAAgB,kBADT;AAEPC,QAAAA,MAAM,EAAE,kBAFD;AAGP,yBAAgB,YAAUH,YAAY,CAACC,OAAb,CAAqB,OAArB;AAHnB;AAHJ,KAAD,CAAL,CAWCtB,IAXD,CAWM6B,GAAG,IAAI;AAEX,UAAIA,GAAG,CAACzB,IAAJ,CAAS0B,MAAT,GAAgB,CAApB,EACE;AAAE1B,QAAAA,IAAI,GAACyB,GAAG,CAACzB,IAAT;;AACA,YAAGwB,KAAK,IAAE,cAAV,EACA;AAAC,gBAAMG,MAAM,GAAC3B,IAAI,CAACsB,IAAL,CAAU,CAACQ,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACE,YAAF,CAAeC,aAAf,CAA6BF,CAAC,CAACC,YAA/B,EAA6C,IAA7C,EAAmD;AAACE,YAAAA,WAAW,EAAE;AAAd,WAAnD,CAApB,CAAb;AACA7C,UAAAA,QAAQ,CAAC;AAACC,YAAAA,IAAI,EAACJ,IAAN;AAAWmC,YAAAA,OAAO,EAACM;AAAnB,WAAD,CAAR;AACA;;AACD,YAAGH,KAAK,IAAE,KAAV,EACA;AACE,gBAAMG,MAAM,GAAC3B,IAAI,CAACsB,IAAL,CAAU,CAACQ,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAACD,KAAF,CAAQI,aAAR,CAAsBF,CAAC,CAACF,KAAxB,EAA+B,IAA/B,EAAqC;AAACK,YAAAA,WAAW,EAAE;AAAd,WAArC,CAApB,CAAb;AACA7C,UAAAA,QAAQ,CAAC;AAACC,YAAAA,IAAI,EAACJ,IAAN;AAAWmC,YAAAA,OAAO,EAACM;AAAnB,WAAD,CAAR;AACD;AACF;AACF,KAzBH;AA6BC,GAnHD;AAoHC;AAID,IAAI3B,IAAI,GAAGmC,IAAI,CAACC,KAAL,CAAWnB,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAX;AACA,IAAIb,KAAK,GAAC8B,IAAI,CAACC,KAAL,CAAWnB,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAX,CAAV;AACA,IAAImB,GAAG,GAAGpB,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAV;AACA,IAAIU,MAAM,GAACO,IAAI,CAACC,KAAL,CAAWnB,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAAX;AACA,IAAIoB,YAAY,GAChB;AAAE/C,EAAAA,OAAO,EAACS,IAAI,GAAGA,IAAH,GAAU,EAAxB;AACED,EAAAA,MAAM,EAACM,KAAK,GAACA,KAAD,GAAO,EADrB;AAEEkC,EAAAA,KAAK,EAAC,EAFR;AAGEpC,EAAAA,IAAI,EAACkC,GAAG,GAACA,GAAD,GAAK,IAHf;AAIEG,EAAAA,UAAU,EAAC,IAJb;AAKEC,EAAAA,cAAc,EAACb,MAAM,GAACA,MAAD,GAAQ;AAL/B,CADA;AAQA,eAAe,SAASc,eAAT,CAAyBC,KAAK,GAAEL,YAAhC,EAA8CM,MAA9C,EAAsD;AACnE,MAAGA,MAAM,CAACtD,IAAP,IAAa,oBAAhB,EACA;AAAE,QAAIuD,QAAQ,qBAAKF,KAAL,CAAZ;;AACAE,IAAAA,QAAQ,CAACtD,OAAT,GAAiBqD,MAAM,CAACrD,OAAxB;AACA0B,IAAAA,YAAY,CAAC6B,OAAb,CAAqB,QAArB,EAA+BX,IAAI,CAACY,SAAL,CAAeF,QAAQ,CAACtD,OAAxB,CAA/B;AACA,WAAOsD,QAAP;AACD;;AAED,MAAGD,MAAM,CAACtD,IAAP,IAAa,YAAhB,EACA;AAAE,QAAIuD,QAAQ,qBAAKF,KAAL,CAAZ;;AACAE,IAAAA,QAAQ,CAAC9C,MAAT,GAAgB6C,MAAM,CAAC7C,MAAvB;AACAa,IAAAA,OAAO,CAACC,GAAR,CAAYgC,QAAQ,CAAC9C,MAArB;AACAkB,IAAAA,YAAY,CAAC6B,OAAb,CAAqB,OAArB,EAA8BX,IAAI,CAACY,SAAL,CAAeF,QAAQ,CAAC9C,MAAxB,CAA9B;AACA,WAAO8C,QAAP;AACD;;AACD,MAAGD,MAAM,CAACtD,IAAP,IAAa,YAAhB,EACA;AAAE,QAAIuD,QAAQ,qBAAKF,KAAL,CAAZ;;AACAE,IAAAA,QAAQ,CAAC1C,IAAT,GAAcyC,MAAM,CAACzC,IAArB;AACAS,IAAAA,OAAO,CAACC,GAAR,CAAYgC,QAAQ,CAAC1C,IAArB;AACAc,IAAAA,YAAY,CAAC6B,OAAb,CAAqB,MAArB,EAA4BD,QAAQ,CAAC1C,IAArC;AACA,WAAO0C,QAAP;AACD;;AACD,MAAGD,MAAM,CAACtD,IAAP,IAAa,+BAAhB,EACA;AAAE,QAAIuD,QAAQ,qBAAKF,KAAL,CAAZ;;AACAE,IAAAA,QAAQ,CAACtD,OAAT,GAAiBqD,MAAM,CAACrD,OAAxB;AACAqB,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY+B,MAAM,CAACxD,OAAnB;AACAwB,IAAAA,OAAO,CAACC,GAAR,CAAYgC,QAAQ,CAACtD,OAArB;AACA0B,IAAAA,YAAY,CAAC6B,OAAb,CAAqB,QAArB,EAA8BX,IAAI,CAACY,SAAL,CAAeF,QAAQ,CAACtD,OAAxB,CAA9B;AACA,WAAOsD,QAAP;AACD;;AACA,MAAGD,MAAM,CAACtD,IAAP,IAAa,aAAhB,EACA;AACC,QAAIuD,QAAQ,qBAAKF,KAAL,CAAZ;;AACAE,IAAAA,QAAQ,CAACL,UAAT,GAAoBI,MAAM,CAACvB,OAA3B;AACA,QAAGwB,QAAQ,CAACL,UAAT,IAAqB,IAAxB,EAA8BjC,KAAK,CAAC,yCAAD,CAAL;AAC9B,WAAOsC,QAAP;AACA;;AACD,MAAGD,MAAM,CAACtD,IAAP,IAAa,MAAhB,EACA;AAAE,QAAIuD,QAAQ,qBAAKF,KAAL,CAAZ;;AACFE,IAAAA,QAAQ,CAACJ,cAAT,GAAwBG,MAAM,CAACvB,OAA/B;AACAJ,IAAAA,YAAY,CAAC6B,OAAb,CAAqB,QAArB,EAA8BX,IAAI,CAACY,SAAL,CAAeF,QAAQ,CAACJ,cAAxB,CAA9B;AACA,WAAOI,QAAP;AAEC,GAND,MAOI,OAAOF,KAAP;AACN","sourcesContent":["\r\nimport axios from 'axios';\r\nconst GET_PRODUCT_DETAIL = 'GET_PRODUCT_DETAIL';   \r\nconst GET_COLORS='GET_COLORS';\r\nconst GET_RATING='GET_RATING';\r\nconst GET_PRODUCT_BY_NAME_AND_COLOR='GET_PRODUCT_BY_NAME_AND_COLOR';\r\nconst SET_COMMENT='SET_COMMENT';\r\nconst SORT='SORT';\r\nexport function show(product) {\r\n   return dispatch => {\r\n      dispatch({type:GET_PRODUCT_DETAIL,Product:product});//tra ve cho form\r\n        \r\n   \r\n  }\r\n}\r\nexport function getColors(name)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${name}/Colors`,\r\n    \r\n     \r\n    }).then(response => {\r\n      if(response.status==\"200\")\r\n    dispatch({type:GET_COLORS,Colors:response.data});//tra ve cho form\r\n    \r\n    })\r\n}\r\n}\r\n\r\nexport function getRating(id)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${id}/Rating`,\r\n    \r\n     \r\n    }).then(response => {\r\n      if(response.status==\"200\")\r\n    dispatch({type:GET_RATING,Rate:response.data});//tra ve cho form\r\n    })\r\n\r\n}\r\n\r\n}\r\n//detail chon mau\r\nexport function getProductByNameAndColor(product,name,color,shop_id)\r\n{\r\n  return dispatch => {\r\n    axios({\r\n      method: 'get',\r\n      url: `https://127.0.0.1:5001/api/Product/${name}/${color}/${shop_id}`,\r\n     }).then(response => {\r\n      if(response.status==\"200\")\r\n     \r\n    dispatch({type:GET_PRODUCT_BY_NAME_AND_COLOR,Product:response.data});//tra ve cho form\r\n    if(response.status==\"404\")\r\n    {  alert(\"Sản phẩm này hiện tại hết màu này,quý khách vui lòng chọn màu khác,xin cảm ơn ạ!!!\")\r\n      dispatch({type:GET_PRODUCT_BY_NAME_AND_COLOR,Product:product})\r\n     }\r\n    })\r\n\r\n}\r\n\r\n}\r\n//comment\r\nexport function setComment(user_id,product_id,rate)\r\n{   console.log(user_id);\r\n    console.log(product_id);\r\n    console.log(rate); \r\n  var comment={\r\n  contents :\"san pham tot\",\r\n  rate :rate,\r\n  product_id:product_id,\r\n  user_id :user_id\r\n    }\r\n    var token='Bearer '+localStorage.getItem('token');\r\n   return dispatch=>{\r\n  axios(\r\n\r\n    {  method:'post',\r\n       url: `https://127.0.0.1:5001/api/Comment`,\r\n       data:comment,\r\n       headers:{\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'Authorization':token\r\n      }\r\n        \r\n    }\r\n  ).then(response=>{\r\n    if(response.status==\"200\")\r\n    dispatch({type:\"SET_COMMENT\",payload:true});\r\n    else  dispatch({type:\"SET_COMMENT\",payload:false});\r\n  }\r\n\r\n  )\r\n}\r\n\r\n}\r\n//sort\r\n\r\n\r\nexport function sort(by,value) {\r\n  console.log(\"by\");\r\n  console.log(by);\r\n  console.log(\"value\");\r\n  console.log(value);\r\nreturn dispatch => {\r\n  var id=null; \r\nif(by==\"Rating\")\r\n  { \r\n    if(value==\"1-3\")\r\n    {\r\n  axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/Product/Rating/${1}-${3}`,\r\n      headers:{\r\n     'Content-Type': 'application/json',\r\n     Accept: 'application/json',\r\n     'Authorization':'Bearer '+localStorage.getItem('token')\r\n  }\r\n\r\n\r\n})\r\n.then(res => {\r\n     if(res.status==\"200\")  dispatch({type:SORT,payload:res.data});\r\n    } \r\n)\r\n  }\r\nif(value==\"4-5\")\r\n{\r\naxios({\r\n  method:'get',\r\n  url: `https://127.0.0.1:5001/api/Product/Rating/${4}-${5}`,\r\n  headers:{\r\n   'Content-Type': 'application/json',\r\n   Accept: 'application/json',\r\n   'Authorization':'Bearer '+localStorage.getItem('token')\r\n }\r\n\r\n\r\n})\r\n.then(res => {\r\n  console.log(\"4-5\")\r\n  console.log(res.data);\r\n     if(res.status==\"200\") dispatch({type:SORT,payload:res.data});\r\n    } \r\n)\r\n  }\r\n\r\n  }\r\n  \r\nif(by==\"Price\")\r\n{\r\n  var data=[];\r\n    axios({\r\n      method:'get',\r\n      url: `https://127.0.0.1:5001/api/Product`,\r\n      headers:{\r\n       'Content-Type': 'application/json',\r\n       Accept: 'application/json',\r\n       'Authorization':'Bearer '+localStorage.getItem('token')\r\n     }\r\n    \r\n\r\n    })\r\n    .then(res => {\r\n    \r\n      if (res.data.length>0)\r\n        { data=res.data;\r\n          if(value==\"1-300000\")\r\n          {const result=data.filter(data =>data.price>1&&data.price<301000);\r\n            dispatch({type:SORT,payload:result});\r\n       \r\n          }\r\n          if(value==\"300000-500000\")\r\n          {\r\n            const result=data.filter(data =>data.price>301000&&data.price<501000);\r\n            console.log(\"result\");\r\n            dispatch({type:SORT,payload:result});\r\n          }\r\n          if(value==\"500000-1000000\")\r\n          {  console.log(\"result\");\r\n        \r\n            const result=data.filter(data =>data.price>501000&&data.price<1000000);\r\n            dispatch({type:SORT,payload:result});\r\n          }\r\n       } \r\n     }\r\n    )\r\n}\r\nif(by==\"Sort\")\r\nvar data=[];\r\naxios({\r\n  method:'get',\r\n  url: `https://127.0.0.1:5001/api/Product`,\r\n  headers:{\r\n   'Content-Type': 'application/json',\r\n   Accept: 'application/json',\r\n   'Authorization':'Bearer '+localStorage.getItem('token')\r\n }\r\n\r\n\r\n})\r\n.then(res => {\r\n\r\n  if (res.data.length>0)\r\n    { data=res.data;\r\n      if(value==\"Tên sản phẩm\")\r\n      {const result=data.sort((a, b) => a.product_name.localeCompare(b.product_name, 'es', {sensitivity: 'base'}))\r\n       dispatch({type:SORT,payload:result});\r\n      }\r\n      if(value==\"Giá\")\r\n      {\r\n        const result=data.sort((a, b) => a.price.localeCompare(b.price, 'es', {sensitivity: 'base'}))\r\n        dispatch({type:SORT,payload:result});\r\n      }\r\n    }\r\n  })\r\n\r\n\r\n\r\n}\r\n}       \r\n\r\n\r\n\r\nvar data = JSON.parse(localStorage.getItem('detail'));\r\nvar color=JSON.parse(localStorage.getItem('color'));\r\nvar dt1 = localStorage.getItem('rate');\r\nvar filter=JSON.parse(localStorage.getItem('filter'));\r\nvar initialState =\r\n{ Product:data ? data : [],\r\n  Colors:color?color:[],\r\n  Sizes:[],\r\n  Rate:dt1?dt1:null,\r\n  hasComment:null,\r\n  productsFilter:filter?filter:[]\r\n}\r\nexport default function product_reducer(state =initialState, action) {\r\n  if(action.type=='GET_PRODUCT_DETAIL')\r\n  { let newState={...state};\r\n    newState.Product=action.Product\r\n    localStorage.setItem('detail', JSON.stringify(newState.Product));\r\n    return newState;\r\n  }\r\n\r\n  if(action.type=='GET_COLORS')\r\n  { let newState={...state};\r\n    newState.Colors=action.Colors;\r\n    console.log(newState.Colors);\r\n    localStorage.setItem('color', JSON.stringify(newState.Colors));\r\n    return newState;\r\n  }\r\n  if(action.type=='GET_RATING')\r\n  { let newState={...state};\r\n    newState.Rate=action.Rate;\r\n    console.log(newState.Rate);\r\n    localStorage.setItem(\"rate\",newState.Rate);\r\n    return newState;\r\n  }\r\n  if(action.type=='GET_PRODUCT_BY_NAME_AND_COLOR')\r\n  { let newState={...state};\r\n    newState.Product=action.Product;\r\n    console.log(\"adashjfadsgfd\");\r\n    console.log(action.product);\r\n    console.log(newState.Product);\r\n    localStorage.setItem(\"detail\",JSON.stringify(newState.Product));\r\n    return newState;\r\n  }\r\n   if(action.type==\"SET_COMMENT\")\r\n   {\r\n    let newState={...state};\r\n    newState.hasComment=action.payload;\r\n    if(newState.hasComment==true) alert(\"cam on danh gia ve san pham nay cua ban\");\r\n    return newState;\r\n   }\r\n   if(action.type=='SORT')\r\n   { let newState={...state};\r\n   newState.productsFilter=action.payload;\r\n   localStorage.setItem(\"filter\",JSON.stringify(newState.productsFilter));\r\n   return newState;\r\n\r\n   }\r\n  else return state;\r\n}"]},"metadata":{},"sourceType":"module"}